{"version":3,"sources":["serviceWorker.ts","CharacterCreator/React/BodyMap.tsx","CharacterCreator/React/BodySelector.tsx","CharacterCreator/React/PartSelector.tsx","CharacterCreator/React/PartAccordion.tsx","CharacterCreator/React/CharacterCanvas.tsx","CharacterCreator/React/CharacterCreator.tsx","Items/Classes/Item.tsx","Items/Classes/ItemWeapon.tsx","Items/React/Common/CardIcon.tsx","Items/Classes/ItemPotion.tsx","Items/React/Common/CardButtons/AttackButton.tsx","Items/React/Common/CardButtons/PurchaseButton.tsx","Items/React/Common/CardButtons/RemoveButton.tsx","Items/React/Common/ItemCard.tsx","Items/React/Shop/BazaarCarpet.tsx","Items/Classes/ItemArmor.tsx","Items/Classes/ItemWondrous.tsx","Items/Classes/ItemSource.tsx","Items/React/Shop/CarpetMap.tsx","Items/React/Common/ItemDetailsModal.tsx","Items/Interfaces/CharacterData.ts","Login/Classes/UserDataAuth.tsx","Items/Classes/CharacterState.tsx","Items/React/Shop/ItemShop.tsx","Items/React/Common/AttackRollModal.tsx","Items/React/Inventory/Inventory.tsx","Login/React/LoginPage.tsx","Login/React/ProtectedRoute.tsx","LandingSpace.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","bodyMaps","Array","push","name","description","imageSource","layers","avgMasculineLayers","avgFeminineLayers","avgMasculineReptilianLayers","avgFeminineReptilianLayers","BodySelector","props","Button","className","variant","style","borderColor","boxShadow","width","onClick","bodyMap","src","alt","Carousel","Caption","PartSelector","layerIndex","rounded","PartAccordion","layer","images","map","this","Card","background","text","Accordion","Toggle","as","Header","eventKey","toString","cursor","key","Collapse","Body","renderPartsButtons","Tab","title","Tabs","defaultActiveKey","id","renderPartTabs","React","Component","CharacterCanvas","canvasHeight","canvasWidth","outlineColors","handleOutlineColorChange","color","setState","outlineColor","hex","state","canvas","refs","borderCanvas","display","getContext","imageSmoothingEnabled","prevProps","imagesWidth","imagesHeight","loadedImages","promiseArray","imagesToRender","image","index","imgSrc","height","Promise","resolve","partImg","Image","onload","renderImagesFn","all","then","charCtx","charCanvas","clearRect","forEach","img","drawImage","charImgSrc","toDataURL","borderImg","borderCtx","borderStyle","dArr","i","length","globalCompositeOperation","fillStyle","fillRect","drawImageBorder","ref","backgroundImage","Container","fluid","Row","onChangeComplete","colors","onClickDownload","document","getElementById","CharacterCreator","canvasImages","partLayers","carouselIndex","carouselDirection","downloadUrl","link","createElement","download","href","click","newCanvasImages","newImagesToRender","includes","Item","body","handleBodySelection","direction","canvasImagesToRender","currentBodyMap","Col","lg","interval","indicators","onSelect","handleCarouselSelect","bind","renderBodySelection","downloadImage","layerName","handlePartSelection","details","iconSource","source","itemCost","requiresAttunement","modifications","type","paragraphMargins","titleMargins","padding","JSON","stringify","ItemWeapon","shortRange","longRange","properties","attacks","paddingTop","GetAttackDetails","GetProperties","attackDetails","Object","entries","element","damageRolls","rolls","roll","damageType","toLowerCase","diceCount","diceSize","modifier","fontWeight","propertyDetails","property","json","item","assign","IItemIsItemWeapon","isType","undefined","CardIcon","OverlayTrigger","placement","delay","show","hide","overlay","Tooltip","tooltipTitle","tooltipText","ItemPotion","hasWithdrawalEffect","GetWithdrawalEffectClause","IItemIsItemPotion","AttackButton","attackIndicators","callbackFunction","attackName","cardIconSize","left","PurchaseButton","canPurchase","GetCustomButtonProperties","setTimeout","GetPurchaseStateText","RemoveButton","ItemCard","cardWidth","cardHeight","cardDefaultMargin","cardRatio","itemAreaDefaultOffset","itemAreaDefaultSize","titleDefaultTopOffset","titleDefaultFontSize","titleWidth","titleDefaultLeftOffset","descAreaDefaultOffset","descAreaDefaultSize","attackIconDefaultSize","iconDefaultSize","iconDefaultLeftOffset","iconDefaultTopOffset","coinDefaultSize","coinDefaultLeftOffset","coinDefaultTopOffset","titleFontSize","itemDetails","buttons","cardInteractions","some","interaction","onAttackButton","attackButtons","flatMap","attack","concat","onPurchaseButton","purchaseButton","onRemoveButton","removeButton","icons","iconDimensions","cardCanvas","LoadCard","DrawTitleText","imagesToLoad","borderImage","GetCardBackSource","iconImage","loadedImagesPromises","console","log","DrawCard","titleText","testDiv","innerText","cardDiv","card","visibility","insertAdjacentElement","textWidth","offsetWidth","removeChild","fontSize","fontRatio","newFontSize","Math","min","margin","onItemClick","top","maxWidth","GetCardIcons","maxHeight","minHeight","GetCardButtons","BazaarCarpet","carpetMap","items","onPurchaseClick","rugName","borderImageSource","rugBorderSource","getShopItems","ItemArmor","armorBonus","addDex","stealthDisadvantage","ItemWondrous","ItemSource","_tableName","instance","listToSearch","constructedItem","ItemMap_Weapons","ItemMap_Armor","ItemMap_Potions","ItemMap_Wondrous","currentItem","fromJson","IItemIsItemArmor","IItemIsItemWondrous","CarpetMap","borderSource","itemType","itemLookup","GetItem","CarpetMaps","ItemDetailsModal","showAlert","Modal","onHide","hideModal","centered","Title","getSourceText","getTypeDisplay","RenderItemDescription","Footer","CharacterData","characterName","itemData","jsonItems","serializedString","serializedData","retVal","parsedJson","parse","assignedObject","createdItems","filter","UserDataAuth","_authState","salt","_userData","_username","_snapshotListener","onUserDataChanged_listeners","BCrypt","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","onAuthStateChanged","HandleAuthStateChanged","uid","currentUser","docSnapshot","charData","exists","docData","data","characterData","s","DeSerialize","GetUid","firestore","collection","collection_UserWritable","doc","onSnapshot","DeserializeCharData","onUserDataChanged_notify","email","user","GetInstance","InitializeAfterAuth","UnsubscribeSnapshotListener","signOut","password","loginResponse","DidLogin","Errors","setPersistence","Auth","Persistence","LOCAL","catch","error","errorMessage","message","signInWithEmailAndPassword","credentials","passwordDupe","createResponse","DidCreate","passwordHash","createUserWithEmailAndPassword","fulfilledValue","rejectedValue","reject","timeoutWaiting","clearTimeout","Serialize","set","resolved","reason","get","userData","e","_instance","MaxPasswordLength","CharacterState","_validCharnameCharacters","onInventoryChanged_listeners","allCharactersData","_currentCharacter","storedCharName","onUserDataChanged","UpdateInventory","localStorage","getItem","currentCharacterStorage","FetchCharacterData","AddCharacter","firstCharacterInList","find","c","nameIsValid","charName","userHitCancel","userUsedInvalidCharacters","userEnteredExistingName","atLeastOneValidNameExists","userPrompt","input","prompt","stringInput","test","newCharData","UpdateCharacterData","AddItem","didAdd","RemoveItem","didRemove","serializedItem","GetEqualityString","foundMatch","splice","GetItemsOfType","newCharName","setItem","ItemShop","showItemDialog","setModalVisiblity","onItemPurchase","carpet","getBazaarCarpets","AddItemToCurrentCharacter","AttackRollModal","randomRollNumbers","rollDelay","rollDieAudio","Audio","roll20Audio","roll1Audio","attackRoll","damageRoll","volume","dieFaces","ceil","random","randomNumberList","floor","GetDieValue","play","rolledNumbers","rollStatement","diceRollsMessage","join","rollModifierMessage","damageMessage","onEntering","RollAttack","RollDamage","version","xmlns","fill","d","GetDamageRollDisplay","Inventory","armorItems","potionItems","weaponItems","wondrousItems","showAttackRoll","attackRolls","handleChange","handleStorageChange","onInventoryChanged","itemClick","removeCallback","attackCallback","updateFromInventory","GetCurrentItemsOfType","RemoveItemFromCurrentCharacter","handleItemClick","CurrentCharacter","getArmor","getPotions","getWeapons","getWondrous","LoginPage","currentUsername","currentPassword","currentPassDupe","loginState","CheckForAccess","pageState","errorMessages","granted","onRejected","event","preventDefault","Login","loggedIn","Logout","CreateAccount","onResolve","onReject","target","value","getErrorMessages","action","method","onSubmit","submitLogin","onChange","handleUsernameInput","handlePasswordInput","submitGoToCreateAccount","to","Username","submitLogout","submitCreateAccount","handlePassDupeInput","submitBackToLogin","ProtectedRoute","routeStatus","GetComponentToRender","path","children","Home","ReactDOM","render","exact","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0da438e2.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import avgFeminineLayers from './json/avg_Feminine.json';\r\nimport avgMasculineLayers from './json/avg_Masculine.json';\r\nimport avgFeminineReptilianLayers from './json/avg_Feminine_Reptilian.json';\r\nimport avgMasculineReptilianLayers from './json/avg_Masculine_Reptilian.json';\r\n\r\n/**\r\n * @description\r\n * The contents of each image \"layer\" that can be overlayed on top of the character image. This contains info\r\n * about what the layer is called (e.g. 'clothing', or 'hats'), what the z-layer info is for the layer, and a\r\n * list of possible image sources that are contained in the image layer.\r\n * @param key The name of the layer.\r\n * @param layerIndex The z-index of the layer. The higher the number, the more 'in front' that the layer is.\r\n * @param images A list of possible image sources that are drawn in this layer. Only one of these can be drawn\r\n * from this list at a time (this is intentional).\r\n */\r\nexport type ImageLayer = {\r\n    key: string;\r\n    layerIndex: number;\r\n    images: ImageDescriptor[];\r\n}\r\n\r\nexport type ImageDescriptor = {\r\n    imageSource: string;\r\n    tags: string[];\r\n}\r\n\r\n/**\r\n * @description\r\n * A mapping from the body that will be displayed to the list of layers associated with that body.\r\n */\r\nexport type BodyMap = {\r\n    name: string;\r\n    description: string;\r\n    imageSource: string;\r\n    layers: ImageLayer[];\r\n}\r\n\r\n/**\r\n * @remarks The layer index for every layer starts at 1. This is because '0' is reserved for the base\r\n * body. Setting this to '0' on a layer will remove the base body.\r\n */\r\nexport var bodyMaps: BodyMap[] = new Array(0);\r\nbodyMaps.push({\r\n    name: 'Average-Sized, Masculine',\r\n    description: \"Masculine body type! Of average size; good for humans, elves, orcs, and tieflings.\",\r\n    imageSource: \"./images/Examples/Avg_Male.png\",\r\n    layers: avgMasculineLayers\r\n}, {\r\n    name: 'Average-Sized, Feminine',\r\n    description: \"Feminine body type! Of average size; good for humans, elves, orcs, and tieflings.\",\r\n    imageSource: \"./images/Examples/Avg_Female.png\",\r\n    layers: avgFeminineLayers\r\n}, {\r\n    name: 'Dragonborn, Masculine',\r\n    description: \"Dragonborn! Cold-blooded and rainbow-colored! These are masculine-bodied dragonborn.\",\r\n    imageSource: \"./images/Examples/Reptilian_Male.png\",\r\n    layers: avgMasculineReptilianLayers\r\n}, {\r\n    name: 'Dragonborn, Feminine',\r\n    description: \"Dragonborn! Cold-blooded and rainbow-colored! These are feminine-bodied dragonborn.\",\r\n    imageSource: \"./images/Examples/Reptilian_Female.png\",\r\n    layers: avgFeminineReptilianLayers\r\n}\r\n);\r\n","import React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { BodyMap } from './BodyMap';\r\nimport { Carousel } from 'react-bootstrap';\r\n\r\ninterface IBodySelector {\r\n    onClick: Function;\r\n    bodyMap: BodyMap;\r\n}\r\n\r\nexport function BodySelector(props: IBodySelector) {\r\n    return (\r\n        <Button\r\n            className='bodySelector'\r\n            variant='dark'\r\n            style={{\r\n                borderColor: 'rgba(255, 255, 255, 0.05)',\r\n                boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)',\r\n                width: '100%'\r\n            }}\r\n            onClick={() => props.onClick(props.bodyMap)}>\r\n            <img src={props.bodyMap.imageSource} alt='body selection'/>\r\n            <Carousel.Caption>\r\n                <h3 className='body-option-title'>{props.bodyMap.name}</h3>\r\n                <p className='body-option-caption'>{props.bodyMap.description}</p>\r\n            </Carousel.Caption>\r\n        </Button>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Image from 'react-bootstrap/Image';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\ninterface IPartSelector {\r\n    onClick: Function;\r\n    layerIndex: number;\r\n    imageSource: string;\r\n}\r\n\r\nexport default function PartSelector(props: IPartSelector) {\r\n    return (\r\n        <Button\r\n            className='part-selector-button'\r\n            variant='dark'\r\n            style={{\r\n                borderColor: 'rgba(255, 255, 255, 0.05)',\r\n                boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)'\r\n            }}\r\n            onClick={() => props.onClick(props.layerIndex, props.imageSource)}>\r\n            <Image\r\n                className='partSelector'\r\n                src={props.imageSource}\r\n                rounded />\r\n        </Button>\r\n    )\r\n}","import React from 'react';\r\nimport { ImageLayer } from './BodyMap';\r\nimport PartSelector from './PartSelector';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport Tabs from 'react-bootstrap/Tabs'\r\n\r\ninterface IPartAccordionProps {\r\n    layers: ImageLayer[];\r\n    onClick: Function;\r\n}\r\n\r\nexport class PartAccordion extends React.Component<IPartAccordionProps> {\r\n    renderPartsButtons(layer: ImageLayer) {\r\n        return layer.images.map((src) => {\r\n            return (\r\n                <PartSelector\r\n                    onClick={this.props.onClick}\r\n                    layerIndex={layer.layerIndex}\r\n                    imageSource={src.imageSource}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    renderPartCards() {\r\n        return this.props.layers.map((layer) => {\r\n            return (\r\n                <Card style={{ background: 'rgba(255, 255, 255, 0.07)' }} text=\"white\">\r\n                    <Accordion.Toggle as={Card.Header} eventKey={layer.layerIndex.toString()}\r\n                        style={{ cursor: \"pointer\" }}>\r\n                        {layer.key}\r\n                    </Accordion.Toggle>\r\n                    <Accordion.Collapse eventKey={layer.layerIndex.toString()}>\r\n                        <Card.Body>\r\n                            {this.renderPartsButtons(layer)}\r\n                        </Card.Body>\r\n                    </Accordion.Collapse>\r\n                </Card>\r\n            );\r\n        });\r\n    }\r\n\r\n    renderPartTabs() {\r\n        return this.props.layers.map((layer) => {\r\n            return (\r\n                <Tab eventKey={layer.layerIndex.toString()} title={layer.key}>\r\n                    <div className='part-button-tab'>\r\n                        {this.renderPartsButtons(layer)}\r\n                    </div>\r\n                </Tab>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Tabs defaultActiveKey=\"Body\" id=\"part-accordion-tabs\">\r\n                    {this.renderPartTabs()}\r\n                </Tabs>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// https://blog.cloudboost.io/using-html5-canvas-with-react-ff7d93f5dc76\r\nimport React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Color, ColorResult, CirclePicker } from 'react-color';\r\nimport { Container } from 'react-bootstrap';\r\nimport { Row } from 'react-bootstrap';\r\n\r\n/**\r\n * @description An interface used to describe the elements provided to this class at creation.\r\n */\r\ninterface ICanvasProps {\r\n    /**\r\n     * @description A list of images to render. This may be updated at-will by the parent, and this element\r\n     * will render those new images.\r\n     */\r\n    imagesToRender: Array<string>;\r\n\r\n    /**\r\n     * @description A callback to this class' \"DOWNLOAD\" button. Owned by the parent.\r\n     */\r\n    onClickDownload: Function;\r\n}\r\n\r\n/**\r\n * @description An interface used to describe the elements maintained by this class' internal state.\r\n */\r\ninterface ICanvasState {\r\n    /**\r\n     * @description The color of the outline border for the character's profile. This will be included when\r\n     * saving the image.\r\n     */\r\n    outlineColor: Color;\r\n}\r\n\r\n/**\r\n * @description A class used to display a character's profile on a canvas element. Also provides a border,\r\n * tools to change the color of the border, and a means to download the image itself.\r\n */\r\nexport class CharacterCanvas extends React.Component<ICanvasProps, ICanvasState> {\r\n    /**\r\n     * @description The height of the canvas' used by this object.\r\n     */\r\n    canvasHeight: number = 256;\r\n\r\n    /**\r\n     * @description The width of the canvas' used by this object.\r\n     */\r\n    canvasWidth: number = 256;\r\n\r\n    /**\r\n     * @description A list of all possible outline color that may be used by the canvas.\r\n     */\r\n    outlineColors: string[] = [\"#131313\", \"#ffffff\", \"#571c27\" ];\r\n\r\n    /**\r\n     * @description The constructor for this object.\r\n     * @param props A list of properties provided by the parent object.\r\n     */\r\n    constructor(props: Readonly<ICanvasProps>) {\r\n        super(props);\r\n        this.state = {\r\n            outlineColor: \"#ffffff\"\r\n        };\r\n    }\r\n\r\n    /**\r\n     * A handler for when this component has been fully loaded. Establishes some basic settings about how to\r\n     * handle the image.\r\n     */\r\n    componentDidMount() {\r\n        const canvas = this.refs.canvas as HTMLCanvasElement;\r\n        const borderCanvas = this.refs.borderCanvas as HTMLCanvasElement;\r\n\r\n        canvas.style.display = \"none\";\r\n        \r\n        const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n        ctx.imageSmoothingEnabled = false;\r\n\r\n        const borderCtx = borderCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n        borderCtx.imageSmoothingEnabled = false;\r\n    }\r\n\r\n    /**\r\n     * @description A handler for a change on an outline color.\r\n     */\r\n    handleOutlineColorChange = (color: ColorResult) => {\r\n        this.setState({\r\n            outlineColor: color.hex\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description A handler for when the component itself updates; either the props or the state of this\r\n     * object. Updates the character display.\r\n     * @param prevProps \r\n     */\r\n    componentDidUpdate(prevProps: ICanvasProps)\r\n    {\r\n        const imagesWidth = this.canvasWidth;\r\n        const imagesHeight = this.canvasHeight;\r\n\r\n        // https://stackoverflow.com/questions/34534549/how-do-you-deal-with-html5s-canvas-image-load-asynchrony\r\n        var loadedImages: Array<HTMLImageElement> = new Array<HTMLImageElement>();\r\n\r\n        /**\r\n         * Provides a function to be used when loading each of the images that will be drawn on the character.\r\n         * @param loadedImages A list of loaded images to maintain outside of this function. This needs to be\r\n         * accessible from where the promise list is being run.\r\n         * @param index The index of the array @see loadedImages that the result of the promise will end up\r\n         * in.\r\n         * @param imgSrc The string/html source for the image to be rendered.\r\n         * @param width The width of the image to be rendered.\r\n         * @param height The height of the image to be rendered.\r\n         */\r\n        var renderImagesFn = function(\r\n                loadedImages: Array<HTMLImageElement>,\r\n                index: number,\r\n                imgSrc: string,\r\n                width: number,\r\n                height: number) {\r\n            return new Promise<void>(resolve => {\r\n                var partImg = new Image(width, height);\r\n                \r\n                partImg.onload = function() {\r\n                    loadedImages[index] = partImg;\r\n                    resolve();\r\n                };\r\n\r\n                partImg.src = imgSrc;\r\n            })\r\n        };\r\n\r\n        // Take the list of images that we should render, and ensure that each and every one of them is A:\r\n        // rendered, and B: exists in a separate loadedImages array for us to draw next.\r\n        var promiseArray = this.props.imagesToRender.map(\r\n            (image, index) => renderImagesFn(loadedImages, index, image, this.canvasWidth, this.canvasHeight));\r\n\r\n        // Ensure that all of the promises have been met, then call the giant handleImagesLoaded() function to\r\n        // draw the images and their border.\r\n        Promise.all(promiseArray).then(handleImagesLoaded);\r\n\r\n        const borderColor= this.state.outlineColor as Color;\r\n        const charCanvas = this.refs.canvas as HTMLCanvasElement;\r\n        const borderCanvas = this.refs.borderCanvas as HTMLCanvasElement;\r\n\r\n        /**\r\n         * @description A function used to handle the final images loaded event. Draws each image in-order,\r\n         * and renders a border around the final image.\r\n         */\r\n        function handleImagesLoaded()\r\n        {\r\n            const charCtx = charCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n            charCtx.clearRect(0, 0, charCanvas.width, charCanvas.height);\r\n\r\n            // Draw the images in-order.\r\n            loadedImages.forEach(img => {\r\n                charCtx.drawImage(img, 0, 0, img.width, img.height);\r\n            });\r\n\r\n            /*\r\n             * Get a copy of the first canvas element. The original canvas element is hidden, but we use it\r\n             * to create a finalized version of the character image so that we have something to draw a border\r\n             * around. Otherwise, we're drawing a border around a bunch of tiny elements, which causes a\r\n             * bunch of tiny, overlapping borders.\r\n             */\r\n            var charImgSrc = charCanvas.toDataURL() as string;\r\n            var borderImg = new Image(imagesWidth, imagesHeight);\r\n            borderImg.src = charImgSrc;\r\n            \r\n            /**\r\n             * Handles the border image's onload event. This causes the image in the final canvas element, the\r\n             * canvas that draws the image and its border, to be rendered.\r\n             */\r\n            borderImg.onload = () => {\r\n                const borderCtx = borderCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n                borderCtx.clearRect(0, 0, borderCanvas.width, borderCanvas.height);\r\n                \r\n                drawImageBorder(borderCanvas, borderImg, borderColor.toString());\r\n\r\n                /**\r\n                 * @description Draws a border around an image with the specified elements, using the\r\n                 * specified image.\r\n                 * @param borderCanvas The canvas that will contain the final border and the final image. This\r\n                 * gets the border drawn to it.\r\n                 * @param img The image to use as a framework for the border.\r\n                 * @param borderStyle The styling to apply to the border image, when drawn.\r\n                 * @remarks https://stackoverflow.com/questions/28207232/draw-border-around-nontransparent-part-of-image-on-canvas\r\n                 * Something to note about this algorith; it can only draw borders of a thickness equal to the\r\n                 * smallest outlying pixel. So, our resolution for pixels on this canvas is '4', which means\r\n                 * that the thickness must be 4, or else we end up with weird stamping artifacts.\r\n                 */\r\n                function drawImageBorder(\r\n                    borderCanvas: HTMLCanvasElement,\r\n                    img: HTMLImageElement,\r\n                    borderStyle: string\r\n                    ) {\r\n                    const borderCtx = borderCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n\r\n                    /*\r\n                     * An array of integers used to offset and effectively \"stamp\" the image repeatedly. This\r\n                     * entire algorithm just takes the original image, stamps it around the base image 9\r\n                     * times, and then uses the source-in global composite operation to paint what's been\r\n                     * drawn according to the style used.\r\n                     * \r\n                     * Note that the numbers stored here are effectively pairs of coordinates to offset the\r\n                     * image stamping by, scaled by the desired thickness of the border.\r\n                     * https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing\r\n                     */\r\n                    var dArr = [\r\n                        -1, -1,\r\n                         0, -1,\r\n                         1, -1,\r\n                        -1,  0,\r\n                         1,  0,\r\n                        -1,  1,\r\n                         0,  1,\r\n                         1,  1];\r\n\r\n                        // Thickness scale\r\n                        var s: number = 4;\r\n\r\n                        // Iterator.\r\n                        var i: number = 0;\r\n\r\n                    // draw images at offsets from the array scaled by s\r\n                    for (; i < dArr.length; i += 2)\r\n                    {\r\n                        borderCtx.drawImage(img, dArr[i] * s, dArr[i + 1] * s);\r\n                    }\r\n\r\n                    // Fill with color\r\n                    borderCtx.globalCompositeOperation = \"source-in\";\r\n                    borderCtx.fillStyle = borderStyle;\r\n                    borderCtx.fillRect(0, 0, borderCanvas.width, borderCanvas.height);\r\n                }\r\n\r\n                borderCtx.globalCompositeOperation = \"source-over\";\r\n                borderCtx.drawImage(borderImg, 0, 0, borderImg.width, borderImg.height);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description Renders this object.\r\n     */\r\n    render() {\r\n        var outlineColor: string = this.state.outlineColor.toString();\r\n\r\n        return (\r\n            <div>\r\n                <canvas className=\"character-canvas\" id=\"characterCanvas\" ref=\"canvas\" width={this.canvasWidth} height={this.canvasHeight} />\r\n                <canvas style={{ backgroundImage: \"linear-gradient(#131313, #ffffff)\" }} id=\"borderCanvas\" ref=\"borderCanvas\" width={this.canvasWidth} height={this.canvasHeight} />\r\n                <Container fluid={true} className='d-flex justify-content-center'>\r\n                    <Row>\r\n                        <CirclePicker\r\n                            onChangeComplete={this.handleOutlineColorChange}\r\n                            color={outlineColor}\r\n                            colors={this.outlineColors}\r\n                        />\r\n                    </Row>\r\n                </Container>\r\n                <Button\r\n                    variant=\"primary\"\r\n                    className=\"downloadButton\"\r\n                    onClick={() => this.props.onClickDownload(document.getElementById('borderCanvas'))}>\r\n                    <h4>&gt;&gt; DOWNLOAD &lt;&lt;</h4>\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}","import './CharacterCreator.css';\r\nimport { bodyMaps, BodyMap, ImageLayer } from './BodyMap';\r\n\r\nimport React from 'react';\r\n\r\nimport {BodySelector} from './BodySelector';\r\nimport {PartAccordion} from './PartAccordion';\r\nimport {CharacterCanvas} from './CharacterCanvas';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { Carousel } from 'react-bootstrap';\r\n\r\n/**\r\n * @description\r\n * The interface for props passed to this object. This class in particular takes no props; it is effectively\r\n * the app itself.\r\n */\r\nexport interface ICharacterCreatorProps {\r\n};\r\n\r\n/**\r\n * @description\r\n * The interface for the internal state maintained by this object.\r\n * @param canvasImages The list of image sources, represented as strings, that will be rendered using the\r\n * Canvas class.\r\n * @param partLayers A list of image layers. This contains information about all of the possible layers that\r\n * can be drawn to the currently-selected body type. This contains information about what each layer is, how\r\n * that layer is drawn, and what the possible images are in that layer.\r\n */\r\ninterface ICharacterCreatorState {\r\n    canvasImages: Array<string>,\r\n    partLayers: ImageLayer[],\r\n    carouselIndex: any,\r\n    carouselDirection: \"prev\" | \"next\"\r\n};\r\n\r\n/**\r\n * The main entry point for this application. Provides all of the buttons and fun stuff needed to create a\r\n * character image on a canvas element.\r\n */\r\nexport class CharacterCreator extends React.Component<ICharacterCreatorProps, ICharacterCreatorState> {\r\n    constructor(props: ICharacterCreatorProps) {\r\n        super(props);\r\n        this.state = {\r\n            // Just fill the canvas images with nothing. We'll re-define it when we add to it.\r\n            canvasImages: new Array<string>(),\r\n            partLayers: Array(0),\r\n            carouselIndex: 0,\r\n            carouselDirection: \"next\"\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Used to download the main character image from the canvas. This is a callback that is passed down to\r\n     * the canvas element.\r\n     * @param canvas The canvas html element from the Canvas character creator class.\r\n     */\r\n    downloadImage(canvas: HTMLCanvasElement)\r\n    {\r\n        const downloadUrl = canvas.toDataURL('image/png');\r\n        const link = document.createElement('a');\r\n\r\n        link.download = 'characterImage.png';\r\n        link.href = downloadUrl;\r\n        link.click();\r\n    }\r\n\r\n    /**\r\n     * A handler for a part selector. Replaces the image at the specified index with a new image.\r\n     * @param layerIndex The index of the layer. This is the z-layer, effectively. The higher the number, the\r\n     * more layers that it draws over.\r\n     * @param imageSource The image source. This is what gets drawn.\r\n     */\r\n    handlePartSelection(layerIndex: number, imageSource: string) {\r\n        const newCanvasImages: Array<string> = this.state.canvasImages;\r\n\r\n        // Javascript doesn't have arrays of fixed length, so this is safe? Still getting used to this.\r\n        newCanvasImages[layerIndex] = imageSource;\r\n\r\n        this.setState({\r\n            canvasImages: newCanvasImages\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Handles the prop-pass from the body-type selector.\r\n     * @param bodyType The type of body that this character creator should acknowledge.\r\n     */\r\n    handleBodySelection(bodyMap: BodyMap) {\r\n        const newImagesToRender: Array<string> = new Array<string>(0);\r\n\r\n        bodyMap.layers.forEach(layer => {\r\n            layer.images.forEach(image => {\r\n                if (image.imageSource.includes('default.png'))\r\n                {\r\n                    newImagesToRender[layer.layerIndex] = image.imageSource;\r\n                }\r\n                // image.tags.forEach(tag => {\r\n                //     if (tag === 'default') {\r\n                //         // Javascript doesn't have arrays of fixed length, so this is safe? Still getting used\r\n                //         // to this.\r\n                //         newImagesToRender[layer.layerIndex] = image.imageSource;\r\n                //     }\r\n                // });\r\n            });\r\n        });\r\n\r\n        this.setState({\r\n            canvasImages: newImagesToRender,\r\n            partLayers: bodyMap.layers\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Renders a series of body selectors for the user to pick from. These body selectors will modify the list\r\n     * of available accessories (since a tiny hat looks silly on a giant person . . . or does it?). Needs to\r\n     * look at the BodyMap.tsx file to understand what will be populated.\r\n     */\r\n    renderBodySelection() {\r\n        return bodyMaps.map((bodyMap) => {\r\n            return (\r\n                <Carousel.Item>\r\n                    <BodySelector\r\n                        onClick={(body: BodyMap) => this.handleBodySelection(body)}\r\n                        bodyMap={bodyMap}\r\n                    />\r\n                </Carousel.Item>\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Handles a carousel selection event. Is used to ensure that the carousel cycles left when the left\r\n     * button is pressed; and the same for the right button.\r\n     * @param eventKey The event key. This is the index that the carousel is being cycled to.\r\n     * @param direction The direction that the carousel is being cycled in.\r\n     */\r\n    handleCarouselSelect(eventKey: any, direction: \"prev\" | \"next\") {\r\n        this.setState({\r\n            carouselIndex: eventKey,\r\n            carouselDirection: direction\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders this object.\r\n     */\r\n    render() {\r\n        const canvasImagesToRender = this.state.canvasImages;\r\n        const currentBodyMap = this.state.partLayers;\r\n\r\n        return (\r\n            <div className=\"CharacterCreator\">\r\n                <h1>Character Creator</h1>\r\n                <Container fluid={true}>\r\n                    <Row>\r\n                        <Col lg={1} />\r\n                        <Col lg={4}>\r\n                            <div className='body-creation'>\r\n                                <div className='body-selector'>\r\n                                    <h2>Body Selection</h2>\r\n                                    <p className=\"italics\">(Each body type uses different accessories and will reset your character design)</p>\r\n                                    <Carousel\r\n                                        interval={null}\r\n                                        indicators={false}\r\n                                        onSelect={this.handleCarouselSelect.bind(this)}>\r\n                                        {this.renderBodySelection()}\r\n                                    </Carousel>\r\n                                    </div>\r\n                                    <div className='body-canvas'>\r\n                                        <CharacterCanvas\r\n                                            imagesToRender={canvasImagesToRender}\r\n                                            onClickDownload={(canvas: HTMLCanvasElement) => this.downloadImage(canvas)}\r\n                                        />\r\n                                </div>\r\n                            </div>\r\n                        </Col>\r\n                        <Col lg={6}>\r\n                            <div className='acc-selector'>\r\n                                <h2>Accessory Selection</h2>\r\n                                <p className=\"italics\">(You need to select a body first if this is empty)</p>\r\n                                <PartAccordion\r\n                                    layers={currentBodyMap}\r\n                                    onClick={(layerName: number, imageSource: string) => this.handlePartSelection(layerName, imageSource)}\r\n                                />\r\n                            </div>\r\n                        </Col>\r\n                        <Col lg={1} />\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CharacterCreator;\r\n","import React from 'react';\r\nimport { IItem, IItemJson } from '../Interfaces/IItem';\r\nimport { TItemModifications } from '../Types/TCardModifications';\r\n\r\nexport abstract class Item implements IItem {\r\n    RenderItemDescription(): JSX.Element {\r\n        return (\r\n            <div>\r\n                <div\r\n                    style={{\r\n                    }}>\r\n                    <h5 className=\"item-description-title\">Details</h5>\r\n                    <p style={{\r\n                        padding: `${this.paragraphMargins}`\r\n                    }}>\r\n                        {this.description} {this.details}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    GetEqualityString(): string {\r\n        return (JSON.stringify(this as IItemJson));\r\n    }\r\n    \r\n    key: string = \"\";\r\n    title: string = \"\";\r\n    description: string = \"\";\r\n    details: string = \"\";\r\n    iconSource: string = \"\";\r\n    source: import(\"../Types/TSourceType\").TSourceType = \"Homebrew\";\r\n    itemCost: number = 0;\r\n    requiresAttunement: boolean = false;\r\n    modifications: TItemModifications[] = [];\r\n    type: import(\"../Types/TItemType\").TItemType = \"Wondrous\";\r\n\r\n    protected readonly paragraphMargins: string = \"0 15px 0 15px\";\r\n    protected readonly titleMargins: string = \"15px 0 0 0\";\r\n}\r\n","import React from 'react';\r\nimport { IItemJson } from '../Interfaces/IItem';\r\nimport { Item } from './Item';\r\nimport { TSourceType } from \"../Types/TSourceType\";\r\nimport { TItemType } from \"../Types/TItemType\";\r\nimport { TAttack } from \"../Types/TAttack\";\r\nimport { TWeaponProperties } from \"../Types/TWeaponProperties\";\r\n\r\nexport interface IItemWeaponJson extends IItemJson {\r\n    shortRange: number;\r\n    longRange: number;\r\n    properties: TWeaponProperties[];\r\n\r\n    /**\r\n     * @description The mapping here is 1 attack to a series of dice rolls that represent that attack.\r\n     * The idea is that multiple damage types necessitate different rolls or modifiers. Each attack is\r\n     * indexed by a unique name.\r\n     */\r\n    attacks: { [index: string]: TAttack[] };\r\n}\r\n\r\nexport class ItemWeapon extends Item implements IItemWeaponJson {\r\n    public readonly key: string = \"\";\r\n    public title: string = \"\";\r\n    public description: string = \"\";\r\n    public details: string = \"\";\r\n    public iconSource: string = \"\";\r\n    public source: TSourceType = \"Homebrew\";\r\n    public itemCost: number = 0;\r\n    public requiresAttunement: boolean = false;\r\n    public readonly type: TItemType = \"Weapon\";\r\n    \r\n    public shortRange: number = 20;\r\n    public longRange: number = 60;\r\n    public properties: TWeaponProperties[] = [];\r\n    \r\n    /**\r\n     * @description The mapping here is 1 attack to a series of dice rolls that represent that attack.\r\n     * The idea is that multiple damage types necessitate different rolls or modifiers. Each attack is\r\n     * indexed by a unique name.\r\n     */\r\n    public attacks: { [index: string]: TAttack[] } = {};\r\n\r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    // http://choly.ca/post/typescript-json/\r\n    static fromJson(json: IItemWeaponJson): ItemWeapon {\r\n        let item = new ItemWeapon();\r\n        return Object.assign(item, json, {\r\n        });\r\n    }\r\n\r\n    RenderItemDescription(): JSX.Element {\r\n        return (\r\n            <div>\r\n                <div\r\n                    style={{\r\n                    }}>\r\n                    <h5 className=\"item-description-title\">Details</h5>\r\n                    <p style ={{\r\n                        padding: `${this.paragraphMargins}`\r\n                    }}>\r\n                        {this.description} {this.details}\r\n                    </p>\r\n                </div>\r\n                <div\r\n                    style={{\r\n                        paddingTop: `${this.titleMargins}`\r\n                    }}>\r\n                    <h5 className=\"item-description-title\">Attacks</h5>\r\n                    <p style={{\r\n                        padding: this.paragraphMargins\r\n                    }}>\r\n                        {this.GetAttackDetails()}\r\n                    </p>\r\n                </div>\r\n                <div\r\n                    style={{\r\n                        paddingTop: `${this.titleMargins}`\r\n                    }}>\r\n                    <h5 className=\"item-description-title\">Properties</h5>\r\n                    <p style={{\r\n                        padding: this.paragraphMargins\r\n                    }}>\r\n                        {this.GetProperties()}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private GetAttackDetails(): JSX.Element {\r\n        var attackDetails: JSX.Element[] = Object.entries(this.attacks).map(element => {\r\n            let name: string = element[0];\r\n            let damageRolls: TAttack[] = element[1];\r\n            let rolls: JSX.Element[] = [];\r\n            \r\n            damageRolls.forEach(roll => {\r\n                if (rolls.length > 0) {\r\n                    rolls.push(\r\n                        <span> and </span>\r\n                    );\r\n                }\r\n                rolls.push (\r\n                    <span className={`text-color-${roll.damageType.toLowerCase()}`}>\r\n                        <span>{`${roll.diceCount}d${roll.diceSize}${roll.modifier > 0 ? `+${roll.modifier}` : ''}`}</span>\r\n                        <span> {roll.damageType} damage</span>\r\n                    </span>\r\n                );\r\n            });\r\n\r\n            return (\r\n                <p>\r\n                    <span style={{ fontWeight: \"bolder\" }}>{name}: </span>{rolls}\r\n                </p>\r\n            );\r\n        })\r\n\r\n        return (\r\n            <div>\r\n                {attackDetails}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private GetProperties(): JSX.Element {\r\n        var propertyDetails: JSX.Element[] = this.properties.map(property => {\r\n            return (\r\n                <div>\r\n                    {property}\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                {propertyDetails}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport function IItemIsItemWeapon(item: IItemJson): item is ItemWeapon {\r\n    var isType: boolean = true;\r\n\r\n    isType = isType && (item as ItemWeapon).type === \"Weapon\";\r\n    isType = isType && (item as ItemWeapon).attacks !== undefined;\r\n\r\n    return isType;\r\n}\r\n","import React from 'react';\r\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\r\n\r\ninterface ICardIconProps {\r\n    iconSource: string;\r\n    tooltipTitle: string;\r\n    tooltipText: string;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nexport function CardIcon(props: ICardIconProps) {\r\n    return (\r\n        <OverlayTrigger\r\n            placement='top'\r\n            delay={{ show: 0, hide: 400 }}\r\n            overlay={\r\n                <Tooltip id=\"card-tooltip\">\r\n                    <span style={{fontWeight: \"bold\"}}>\r\n                        {props.tooltipTitle}\r\n                    </span>\r\n                    <br />\r\n                    {props.tooltipText}\r\n                </Tooltip>\r\n            }>\r\n            <div className=\"card-icon\">\r\n                <img\r\n                    alt=\"Card Icon\"\r\n                    src={props.iconSource}\r\n                    style={{\r\n                        width: `${props.width}px`,\r\n                        height: `${props.height}px`,\r\n                    }} />\r\n            </div>\r\n        </OverlayTrigger>\r\n    )\r\n}","import React from 'react';\r\nimport { IItemJson } from '../Interfaces/IItem';\r\nimport { Item } from './Item';\r\nimport { TSourceType } from \"../Types/TSourceType\";\r\nimport { TItemType } from \"../Types/TItemType\";\r\n\r\nexport interface IItemPotionJson extends IItemJson {\r\n    hasWithdrawalEffect: boolean;\r\n}\r\n\r\nexport class ItemPotion extends Item implements IItemPotionJson {\r\n    public readonly key: string = \"\";\r\n    public title: string = \"\";\r\n    public description: string = \"\";\r\n    public details: string = \"\";\r\n    public iconSource: string = \"\";\r\n    public source: TSourceType = \"Homebrew\";\r\n    public itemCost: number = 0;\r\n    public requiresAttunement: boolean = false;\r\n    public readonly type: TItemType = \"Potion\";\r\n\r\n    public hasWithdrawalEffect: boolean = false;\r\n    \r\n    static fromJson(json: IItemPotionJson): ItemPotion {\r\n        let item = new ItemPotion();\r\n        return Object.assign(item, json, {\r\n        });\r\n    }\r\n\r\n    RenderItemDescription(): JSX.Element {\r\n        return (\r\n            <div>\r\n                <div\r\n                    style={{\r\n                    }}>\r\n                    <h5 className=\"item-description-title\">Details</h5>\r\n                    <p style={{\r\n                        padding: `${this.paragraphMargins}`\r\n                    }}>\r\n                        {this.description} {this.details} {this.GetWithdrawalEffectClause()}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    GetWithdrawalEffectClause(): JSX.Element {\r\n        var clause: JSX.Element;\r\n        if (this.hasWithdrawalEffect) {\r\n            clause = (\r\n                <span>\r\n                    <span>Using this potion will result in a </span>\r\n                    <span className=\"text-color-withdrawal\">withdrawal effect</span>\r\n                    <span>.</span>\r\n                </span>\r\n            )\r\n        }\r\n        else {\r\n            clause = (\r\n                <span></span>\r\n            )\r\n        }\r\n\r\n        return clause;\r\n    }\r\n}\r\n\r\nexport function IItemIsItemPotion(item: IItemJson): item is ItemPotion {\r\n    var isType: boolean = true;\r\n\r\n    isType = isType && (item as ItemPotion).type === \"Potion\";\r\n\r\n    return isType;\r\n}\r\n","import React from 'react';\r\nimport { TAttack } from '../../../Types/TAttack';\r\nimport { TAttackClick } from '../../../Types/CardButtonCallbackTypes/TAttackClick';\r\n\r\ninterface IAttackButtonProps {\r\n    cardIconSize: number;\r\n    attackName: string;\r\n    attacks: TAttack[];\r\n    callbackFunction: TAttackClick;\r\n}\r\n\r\nexport function AttackButton(props: IAttackButtonProps) {\r\n    let attackIndicators: JSX.Element[] = props.attacks.map(roll => {\r\n        var indicators: JSX.Element[] = [];\r\n\r\n        for (let i = 0; i < roll.diceCount; i++) {\r\n            indicators.push(\r\n                <span className={`card-button-stat badge-color-${roll.damageType.toLowerCase()}`}>\r\n                    {roll.diceSize}\r\n                </span>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <span>\r\n                {indicators}{`${roll.modifier > 0 ? `+${roll.modifier}` : ''}`}\r\n            </span>\r\n        );\r\n    });\r\n\r\n    return (\r\n        <div\r\n            className=\"card-button\"\r\n            onClick={() => { props.callbackFunction(props.attackName, props.attacks) }}>\r\n            <img\r\n                alt=\"Attack Button\"\r\n                className=\"card-button-icon\"\r\n                src='./images/Item_Shop/ItemCards/Icons/Button_Attack.png'\r\n                width={props.cardIconSize}\r\n                height={props.cardIconSize}\r\n                style={{\r\n                    left: `-${props.cardIconSize / 2}px`\r\n                }} />\r\n            <div className=\"card-button-name\">\r\n                {props.attackName}\r\n            </div>\r\n            <div className=\"card-button-stats-container\">\r\n                {attackIndicators}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { TPurchaseClick } from '../../../Types/CardButtonCallbackTypes/TPurchaseClick';\r\nimport { IItem } from '../../../Interfaces/IItem';\r\n\r\ninterface IPurchaseButtonProps {\r\n    item: IItem;\r\n    cardIconSize: number;\r\n    callbackFunction: TPurchaseClick;\r\n}\r\n\r\ninterface IPurchaseButtonState {\r\n    canPurchase: boolean;\r\n}\r\n\r\nexport class PurchaseButton extends React.Component<IPurchaseButtonProps, IPurchaseButtonState> {\r\n    constructor(props: IPurchaseButtonProps) {\r\n        super(props)\r\n        this.state = {\r\n            canPurchase: true\r\n        };\r\n    }\r\n\r\n    private GetCustomButtonProperties(): React.CSSProperties {\r\n        var properties: React.CSSProperties = {};\r\n        if (!this.state.canPurchase) {\r\n            properties = {\r\n                background: \"#33984b\",\r\n                cursor: \"default\"\r\n            }\r\n        }\r\n\r\n        return properties;\r\n    }\r\n\r\n    private GetPurchaseStateText(): string {\r\n        return this.state.canPurchase ? \"Purchase\" : \"Purchased!\";\r\n    }\r\n\r\n    public render() {\r\n        const handleButtonClick = () => {\r\n            if (this.state.canPurchase) {\r\n                this.setState({\r\n                    canPurchase: false\r\n                },\r\n                () => {\r\n                    window.setTimeout(() => {\r\n                        this.setState({\r\n                            canPurchase: true\r\n                        })\r\n                    }, 2500)\r\n                });\r\n                this.props.callbackFunction(this.props.item);\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                className=\"card-button\"\r\n                style={this.GetCustomButtonProperties()}\r\n                onClick={handleButtonClick}>\r\n                <img\r\n                    alt=\"card purchase button\"\r\n                    className=\"card-button-icon\"\r\n                    src='./images/Item_Shop/ItemCards/Icons/Button_Purchase.png'\r\n                    width={this.props.cardIconSize}\r\n                    height={this.props.cardIconSize}\r\n                    style={{\r\n                        left: `-${this.props.cardIconSize / 2}px`\r\n                    }} />\r\n                <div className=\"card-button-name\" ref=\"purchase-text\">\r\n                    {this.GetPurchaseStateText()}\r\n            </div>\r\n                <div className=\"card-button-stats-container\">\r\n                    <div className=\"card-button-stat\"\r\n                        style={{\r\n                            boxShadow: \"none\"\r\n                        }}>\r\n                        {this.props.item.itemCost}\r\n                    </div>\r\n                    <img\r\n                        alt=\"coin icon\"\r\n                        className=\"card-button-stat-icon\"\r\n                        width={this.props.cardIconSize}\r\n                        height={this.props.cardIconSize}\r\n                        src='./images/Item_Shop/itemCoinStill.png' />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n ","import React from 'react';\r\nimport { TRemoveClick } from '../../../Types/CardButtonCallbackTypes/TRemoveClick';\r\nimport { IItem } from '../../../Interfaces/IItem';\r\n\r\ninterface IRemoveButtonProps {\r\n    item: IItem;\r\n    cardIconSize: number;\r\n    callbackFunction: TRemoveClick;\r\n}\r\n\r\nexport function RemoveButton(props: IRemoveButtonProps) {\r\n    return (\r\n        <div\r\n            className=\"card-button\"\r\n            onClick={() => { props.callbackFunction(props.item) }}>\r\n            <img\r\n                alt=\"Remove Button\"\r\n                className=\"card-button-icon\"\r\n                src='./images/Item_Shop/ItemCards/Icons/Button_Remove.png'\r\n                width={props.cardIconSize}\r\n                height={props.cardIconSize}\r\n                style={{\r\n                    left: `-${props.cardIconSize / 2}px`\r\n                }} />\r\n            <div className=\"card-button-name\">\r\n                Drop Item\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { IItemJson, IItem } from '../../Interfaces/IItem';\r\nimport { IItemIsItemWeapon } from '../../Classes/ItemWeapon';\r\nimport { Button } from 'react-bootstrap';\r\nimport { CardIcon } from './CardIcon';\r\nimport { IItemIsItemPotion } from '../../Classes/ItemPotion';\r\nimport { AttackButton } from './CardButtons/AttackButton';\r\nimport { PurchaseButton } from './CardButtons/PurchaseButton';\r\nimport { RemoveButton } from './CardButtons/RemoveButton';\r\nimport { TAttackClick } from '../../Types/CardButtonCallbackTypes/TAttackClick';\r\nimport { TRemoveClick } from '../../Types/CardButtonCallbackTypes/TRemoveClick';\r\nimport { TPurchaseClick } from '../../Types/CardButtonCallbackTypes/TPurchaseClick';\r\n\r\nexport type TItemClick = (itemJson: IItem) => void;\r\nexport type TCardInteractions =  \"Purchase\" | \"Remove\" | \"Gather\" | \"Use\";\r\n\r\ninterface IItemCardProps {\r\n    itemDetails: IItem;\r\n    onItemClick: TItemClick | undefined;\r\n    onAttackButton: TAttackClick | undefined;\r\n    onPurchaseButton: TPurchaseClick | undefined;\r\n    onRemoveButton: TRemoveClick | undefined;\r\n    cardInteractions: TCardInteractions[];\r\n}\r\n\r\ninterface IItemCardState {\r\n    titleFontSize: number\r\n}\r\n\r\nexport class ItemCard extends React.Component<IItemCardProps, IItemCardState> {\r\n    readonly cardWidth: number = 194;\r\n    readonly cardHeight: number = 256;\r\n    readonly cardDefaultMargin: number = 6;\r\n    \r\n    // DO NOT CHANGE. The card's icon size is 128. This gives us a scaling raito for everything else.\r\n    readonly cardRatio: number = this.cardHeight / 128;\r\n    \r\n    // Item area measurements.\r\n    readonly itemAreaDefaultOffset: number = 17;\r\n    readonly itemAreaDefaultSize: number = 64;\r\n    \r\n    // Title measurements.\r\n    readonly titleDefaultTopOffset: number = 6;\r\n    readonly titleDefaultFontSize: number = 12;\r\n    readonly titleWidth: number = this.cardWidth * 0.65;\r\n    readonly titleDefaultLeftOffset: number = 1;\r\n    \r\n    // Item description measurements.\r\n    readonly descAreaDefaultOffset: number = 82;\r\n    readonly descAreaDefaultSize: number = 44;\r\n\r\n    // Attack Icon measurements.\r\n    readonly attackIconDefaultSize: number = 16;\r\n\r\n    // Icon measurements.\r\n    readonly iconDefaultSize: number = 16;\r\n    readonly iconDefaultLeftOffset: number = 81;\r\n    readonly iconDefaultTopOffset: number = 17;\r\n\r\n    // Coin measurements.\r\n    readonly coinDefaultSize: number = 16;\r\n    readonly coinDefaultLeftOffset: number = 1;\r\n    readonly coinDefaultTopOffset: number = 17;\r\n\r\n    constructor(props: IItemCardProps) {\r\n        super(props);\r\n        this.state = {\r\n            titleFontSize: this.titleDefaultFontSize\r\n        };\r\n    }\r\n\r\n    private GetCardBackSource() {\r\n        var source: string;\r\n        switch (this.props.itemDetails.type) {\r\n            case \"Weapon\":\r\n                source = \"./images/Item_Shop/ItemCards/CardForge.png\";\r\n                break;\r\n            case \"Potion\":\r\n                source = \"./images/Item_Shop/ItemCards/CardAlchemist.png\";\r\n                break;\r\n            default:\r\n                source = \"./images/Item_Shop/ItemCards/CardDungeon.png\";\r\n                break;\r\n        }\r\n\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * Gets any additional content that should appear on the card. Includes attack buttons, etc.\r\n     */\r\n    private GetCardButtons(): JSX.Element[] {\r\n        var buttons: JSX.Element[] = [];\r\n        var itemDetails: IItemJson = this.props.itemDetails;\r\n\r\n        if (this.props.cardInteractions.some(interaction => interaction === \"Use\")) {\r\n            // This uses a type guard to enforce that itemDetails must be a specific type.\r\n            // https://medium.com/ovrsea/checking-the-type-of-an-object-in-typescript-the-type-guards-24d98d9119b0\r\n            if (IItemIsItemWeapon(itemDetails) && this.props.onAttackButton !== undefined) {\r\n                var attackButtons: JSX.Element[] = Object.entries(itemDetails.attacks).flatMap((attack) => {\r\n                    var name = attack[0];\r\n                    var attacks = attack[1];\r\n\r\n                    return (\r\n                        <AttackButton\r\n                            cardIconSize={this.iconDefaultSize * this.cardRatio}\r\n                            attackName={name}\r\n                            attacks={attacks}\r\n                            callbackFunction={this.props.onAttackButton as TAttackClick}\r\n                        />\r\n                    )\r\n                })\r\n\r\n                buttons = buttons.concat(attackButtons);\r\n            }\r\n        }\r\n\r\n        if (this.props.cardInteractions.some(interaction => interaction === \"Purchase\")\r\n         && this.props.onPurchaseButton !== undefined) {\r\n            var purchaseButton: JSX.Element = (\r\n                <PurchaseButton\r\n                    item={this.props.itemDetails}\r\n                    cardIconSize={this.iconDefaultSize * this.cardRatio}\r\n                    callbackFunction={this.props.onPurchaseButton}\r\n                />\r\n            )\r\n\r\n            buttons = buttons.concat(purchaseButton);\r\n        }\r\n\r\n        if (this.props.cardInteractions.some(interaction => interaction === \"Remove\")\r\n         && this.props.onRemoveButton !== undefined) {\r\n             var removeButton: JSX.Element = (\r\n                 <RemoveButton\r\n                    item={this.props.itemDetails}\r\n                    cardIconSize={this.iconDefaultSize * this.cardRatio}\r\n                    callbackFunction={this.props.onRemoveButton}\r\n                 />\r\n             )\r\n\r\n            buttons = buttons.concat(removeButton);\r\n        }\r\n\r\n        return buttons;\r\n    }\r\n\r\n    private GetCardIcons(): JSX.Element[] {\r\n        var itemDetails: IItemJson = this.props.itemDetails;\r\n        var icons: JSX.Element[] = [];\r\n        var iconDimensions: number = this.iconDefaultSize * this.cardRatio;\r\n\r\n        if (itemDetails.requiresAttunement) {\r\n            icons.push(CardIcon({\r\n                iconSource: './images/Item_Shop/ItemCards/Icons/Attunement.png',\r\n                tooltipTitle: \"Attunement\",\r\n                tooltipText: 'This item requires attunement.',\r\n                width: (iconDimensions),\r\n                height: (iconDimensions),\r\n            }));\r\n        }\r\n\r\n        if (IItemIsItemPotion(itemDetails) && itemDetails.hasWithdrawalEffect) {\r\n            icons.push(CardIcon({\r\n                iconSource: './images/Item_Shop/ItemCards/Icons/Withdrawal.png',\r\n                tooltipTitle: \"Withdrawal\",\r\n                tooltipText: 'Using this potion will result in a withdrawal effect.',\r\n                width: (iconDimensions),\r\n                height: (iconDimensions),\r\n            }));\r\n        }\r\n        else if (IItemIsItemWeapon(itemDetails)) {\r\n            itemDetails.properties.forEach(property => {\r\n                switch (property) {\r\n                    case \"Ammunition\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Ammunition.png',\r\n                            tooltipTitle: \"Ammunition\",\r\n                            tooltipText: 'This item uses ammunition for ranged attacks.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Finesse\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Finesse.png',\r\n                            tooltipTitle: \"Finesse\",\r\n                            tooltipText: 'This item requires finesse. Attacks and damage with this item may use STR or DEX.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Heavy\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Heavy.png',\r\n                            tooltipTitle: \"Heavy\",\r\n                            tooltipText: 'This item is abnormally heavy. Small creatures will have a difficult time using this item.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Improvised\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Improvised.png',\r\n                            tooltipTitle: \"Improvised\",\r\n                            tooltipText: 'This is an improvised weapon.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Light\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Light.png',\r\n                            tooltipTitle: \"Light\",\r\n                            tooltipText: 'This item is unusually light and may be used with another weapon.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Loading\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Loading.png',\r\n                            tooltipTitle: \"Loading\",\r\n                            tooltipText: 'This item requires manually loading and is limited to one attack per action.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Reach\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Reach.png',\r\n                            tooltipTitle: \"Reach\",\r\n                            tooltipText: 'This item has extended reach.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Silver\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Silver.png',\r\n                            tooltipTitle: \"Silver\",\r\n                            tooltipText: 'This item has been plated in silver.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Special\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Special.png',\r\n                            tooltipTitle: \"Special\",\r\n                            tooltipText: 'This item has some special usage. Refer to the card details for more information.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Thrown\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Thrown.png',\r\n                            tooltipTitle: \"Thrown\",\r\n                            tooltipText: 'This item may be thrown without reducing its damage.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"TwoHanded\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/TwoHanded.png',\r\n                            tooltipTitle: \"Two-Handed\",\r\n                            tooltipText: 'This item is unwieldy and requires two hands to utilize.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    case \"Versatile\":\r\n                        icons.push(CardIcon({\r\n                            iconSource: './images/Item_Shop/ItemCards/Icons/Versatile.png',\r\n                            tooltipTitle: \"Versatile\",\r\n                            tooltipText: 'This item is versatile and may be used with one or two hands.',\r\n                            width: (iconDimensions),\r\n                            height: (iconDimensions),\r\n                        }));\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n\r\n        return icons;\r\n    }\r\n\r\n    /**\r\n     * Handles when the component has mounted. This will cause the card to draw.\r\n     */\r\n    componentDidMount() {\r\n        var canvas = this.refs.cardCanvas as HTMLCanvasElement;\r\n        var ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n        ctx.imageSmoothingEnabled = false;\r\n\r\n        this.LoadCard();\r\n        this.DrawTitleText();\r\n    }\r\n\r\n    /**\r\n     * Loads all of the parts needed to render the card itself.\r\n     */\r\n    private LoadCard() {\r\n        var imagesToLoad: HTMLImageElement[] = [];\r\n\r\n        var borderImage = new Image();\r\n        borderImage.src = this.GetCardBackSource();\r\n        imagesToLoad.push(borderImage);\r\n\r\n        var iconImage = new Image();\r\n        iconImage.src = this.props.itemDetails.iconSource;\r\n        imagesToLoad.push(iconImage);\r\n\r\n        var loadedImagesPromises: Promise<void>[] = imagesToLoad.map(image => {\r\n            return new Promise<void>(resolve => {\r\n                image.onload = () => {\r\n                    console.log(`Loaded ${image.src}`)\r\n                    resolve();\r\n                }\r\n            });\r\n        });\r\n\r\n        Promise.all(loadedImagesPromises).then(() => this.DrawCard(borderImage));\r\n    }\r\n\r\n    /**\r\n     * Performs the actual card drawing. Gets the canvas element and draws each component.\r\n     * @param borderImage The card background image that has been loaded and will be drawn.\r\n     */\r\n    private DrawCard(borderImage: HTMLImageElement) {\r\n        var canvas = this.refs.cardCanvas as HTMLCanvasElement;\r\n        var ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n\r\n        ctx.drawImage(borderImage, 0, 0, this.cardWidth, this.cardHeight);\r\n    }\r\n\r\n    /**\r\n     * Draws the title text for this card.\r\n     */\r\n    private DrawTitleText() {\r\n        var titleText: string = this.props.itemDetails.title;\r\n        var testDiv: HTMLDivElement = document.createElement(\"div\") as HTMLDivElement;\r\n        testDiv.innerText = titleText;\r\n        \r\n        var cardDiv = this.refs.card as HTMLDivElement;\r\n        testDiv.style.visibility = 'hidden';\r\n        cardDiv.insertAdjacentElement('afterbegin', testDiv);\r\n        var textWidth: number = testDiv.offsetWidth;\r\n        cardDiv.removeChild(testDiv);\r\n\r\n        /*\r\n         * Once we have the width of the text, now we need to determine if the text element needs to be\r\n         * resized or not.\r\n         *\r\n         * We can determine the following:\r\n         * 1:   If the text size is <= the max size of the title element, then do not resize.\r\n         * 2:   If the text size is > the max size of the title element, adjust the text size by some\r\n         *      percentage.\r\n         * \r\n         * We can determine the percentage by asserting the following steps:\r\n         * 1:   Get a percentage that the text width exceeds the max width.\r\n         * 2:   Multiple that percentage by our standard font size.\r\n         */\r\n\r\n        var fontSize: number = this.titleDefaultFontSize;\r\n        var fontRatio: number = this.titleWidth / textWidth;\r\n        var newFontSize: number = Math.min(fontSize, fontRatio * fontSize);\r\n\r\n        this.setState({\r\n            titleFontSize: newFontSize\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders an instance of this object.\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"card-display\">\r\n                <div\r\n                    className=\"item-card\"\r\n                    ref=\"card\"\r\n                    style={{\r\n                        margin: `${this.cardDefaultMargin * this.cardRatio}px`\r\n                    }}>\r\n                    <Button\r\n                        variant=\"link\"\r\n                        className=\"card-details-button\"\r\n                        onClick={() =>{\r\n                            if (this.props.onItemClick !== undefined) {\r\n                                this.props.onItemClick(this.props.itemDetails)\r\n                            }\r\n                        }}\r\n                        style={{\r\n                            width: `${this.cardWidth}px`,\r\n                            height: `${this.cardHeight}px`\r\n                        }}\r\n                    />\r\n                    <span\r\n                        ref=\"title\"\r\n                        className=\"card-title\"\r\n                        style={{\r\n                            fontSize: `${this.state.titleFontSize}px`,\r\n                            height: `${this.titleDefaultFontSize}px`,\r\n                            top: `${this.titleDefaultTopOffset * this.cardRatio}px`,\r\n                        }}>\r\n                        {this.props.itemDetails.title}\r\n                    </span>\r\n\r\n                    <div\r\n                        className=\"card-icons\"\r\n                        style={{\r\n                            top: `${this.iconDefaultTopOffset * this.cardRatio}px`,\r\n                            left: `${this.iconDefaultLeftOffset * this.cardRatio}px`,\r\n                            maxWidth: `${this.iconDefaultSize * this.cardRatio}px`,\r\n                            height: `${this.iconDefaultSize * this.cardRatio * 4}px`\r\n                        }}>\r\n                        {this.GetCardIcons()}\r\n                    </div>\r\n                    <div\r\n                        className=\"card-info\"\r\n                        style={{\r\n                            top: `${this.descAreaDefaultOffset * this.cardRatio}px`,\r\n                            maxHeight: `${this.descAreaDefaultSize * this.cardRatio}px`,\r\n                            minHeight: `${this.descAreaDefaultSize * this.cardRatio}px`,\r\n                        }}>\r\n                        <div style={{ width: \"100%\" }}>\r\n                            {this.props.itemDetails.description}\r\n                        </div>\r\n                    </div>\r\n                    <img\r\n                        alt=\"card item\"\r\n                        className=\"card-item-image\"\r\n                        src={this.props.itemDetails.iconSource}\r\n                        height={this.itemAreaDefaultSize * this.cardRatio}\r\n                        width={this.itemAreaDefaultSize * this.cardRatio}\r\n                        style={{\r\n                            top: `${this.itemAreaDefaultOffset * this.cardRatio}px`,\r\n                            left: `${this.itemAreaDefaultOffset * this.cardRatio}px`,\r\n                            height: `${this.itemAreaDefaultSize * this.cardRatio}px`,\r\n                            width: `${this.itemAreaDefaultSize * this.cardRatio}px`,\r\n                        }}\r\n                    />\r\n                    <canvas\r\n                        className=\"card-canvas\"\r\n                        ref=\"cardCanvas\"\r\n                        width={this.cardWidth}\r\n                        height={this.cardHeight}\r\n                    />\r\n                </div>\r\n                <div className=\"card-actions\">\r\n                    {this.GetCardButtons()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// May add the card cost back later.\r\n\r\n// <div\r\n//     className=\"card-cost\"\r\n//     style={{\r\n//         top: `${this.coinDefaultTopOffset * this.cardRatio}px`,\r\n//         left: `${this.coinDefaultLeftOffset * this.cardRatio}px`,\r\n//     }}>\r\n//     <img\r\n//         style={{\r\n//             width: `${this.coinDefaultSize * this.cardRatio}px`,\r\n//             height: `${this.coinDefaultSize * this.cardRatio}px`,\r\n//         }}\r\n//         src=\"./images/Item_Shop/itemCoinStill.png\"\r\n//     />\r\n// </div>\r\n//     <span\r\n//         className=\"card-cost-text\"\r\n//         style={{\r\n//             top: `${this.coinDefaultTopOffset * this.cardRatio + (this.coinDefaultSize * this.cardRatio * 0.25)}px`,\r\n//             left: `${this.coinDefaultLeftOffset * this.cardRatio}px`,\r\n//             width: `${this.coinDefaultSize * this.cardRatio}px`,\r\n//             height: `${this.coinDefaultSize * this.cardRatio}px`,\r\n//         }}\r\n//     >\r\n//         {this.props.itemDetails.itemCost}\r\n//     </span>","import React from 'react';\r\nimport { CarpetMap } from './CarpetMap';\r\nimport { ItemCard, TItemClick } from '../Common/ItemCard';\r\nimport { TPurchaseClick } from '../../Types/CardButtonCallbackTypes/TPurchaseClick';\r\n\r\n/**\r\n * @description An interface used to represent the properties required to display this class.\r\n * @param itemDetails The list of items that will be represented on this carpet.\r\n * @param onItemClick The function that will be called-back to when an item is clicked on.\r\n * @param rugBorderSource The source image location for the rug border.\r\n */\r\ninterface IBazaarCarpetProps {\r\n    carpetMap: CarpetMap;\r\n    onItemClick: TItemClick;\r\n    onPurchaseClick: TPurchaseClick;\r\n}\r\n\r\ninterface IBazaarCarpetState {\r\n}\r\n\r\n/**\r\n * @description Returns an instance of this component, BazaarCarpet.\r\n * @param props The list of properties needed to render this item.\r\n */\r\nexport class BazaarCarpet extends React.Component<IBazaarCarpetProps, IBazaarCarpetState>\r\n{\r\n    /**\r\n     * @description Gets the shop items as ShopItem elements.\r\n     * @param itemDetails The list of item details to represent the items on this carpet.\r\n     * @param onItemClick The click event-handler for items.\r\n     * @see ShopItem\r\n     */\r\n    private getShopItems() {\r\n        return this.props.carpetMap.items.map((item) => {\r\n            return (\r\n                <ItemCard\r\n                    itemDetails={item}\r\n                    onItemClick={this.props.onItemClick}\r\n                    onAttackButton={undefined}\r\n                    onPurchaseButton={this.props.onPurchaseClick}\r\n                    onRemoveButton={undefined}\r\n                    cardInteractions={[\"Purchase\"]}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div className='shop-section'>\r\n                <h2 className='pixel-font' style={{ fontSize: 18 }}>{this.props.carpetMap.rugName}</h2>\r\n                <div\r\n                    className='shop-rug'\r\n                    style={{ borderImageSource: `${this.props.carpetMap.rugBorderSource}` }}>\r\n                    {this.getShopItems()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import { IItemJson } from '../Interfaces/IItem';\r\nimport { Item } from './Item';\r\nimport { TSourceType } from \"../Types/TSourceType\";\r\nimport { TItemType } from \"../Types/TItemType\";\r\n\r\nexport interface IItemArmorJson extends IItemJson {\r\n    armorBonus: number;\r\n    addDex: boolean;\r\n    stealthDisadvantage: boolean;\r\n}\r\n\r\nexport class ItemArmor extends Item implements IItemArmorJson {\r\n    public readonly key: string = \"\";\r\n    public title: string = \"\";\r\n    public description: string = \"\";\r\n    public details: string = \"\";\r\n    public iconSource: string = \"\";\r\n    public source: TSourceType = \"Homebrew\";\r\n    public itemCost: number = 0;\r\n    public requiresAttunement: boolean = false;\r\n    public readonly type: TItemType = \"Armor\";\r\n\r\n    public armorBonus: number = 0;\r\n    public addDex: boolean = true;\r\n    public stealthDisadvantage: boolean = false;\r\n\r\n    static fromJson(json: IItemArmorJson): ItemArmor {\r\n        let item = new ItemArmor();\r\n        return Object.assign(item, json, {\r\n        });\r\n    }\r\n}\r\n\r\nexport function IItemIsItemArmor(item: IItemJson) : item is ItemArmor {\r\n    var isType: boolean = true;\r\n\r\n    isType = isType && (item as ItemArmor).type === \"Armor\";\r\n    isType = isType && (item as ItemArmor).addDex !== undefined;\r\n    isType = isType && (item as ItemArmor).stealthDisadvantage !== undefined;\r\n\r\n    return isType;\r\n}\r\n","import { IItemJson } from '../Interfaces/IItem';\r\nimport { Item } from './Item';\r\nimport { TSourceType } from \"../Types/TSourceType\";\r\nimport { TItemType } from \"../Types/TItemType\";\r\n\r\nexport interface IItemWondrousJson extends IItemJson {\r\n}\r\n\r\nexport class ItemWondrous extends Item implements IItemWondrousJson {\r\n    public readonly key: string = \"\";\r\n    public title: string = \"\";\r\n    public description: string = \"\";\r\n    public details: string = \"\";\r\n    public iconSource: string = \"\";\r\n    public source: TSourceType = \"Homebrew\";\r\n    public itemCost: number = 0;\r\n    public requiresAttunement: boolean = false;\r\n    public readonly type: TItemType = \"Wondrous\";\r\n\r\n    static fromJson(json: IItemWondrousJson): ItemWondrous {\r\n        let item = new ItemWondrous();\r\n        return Object.assign(item, json, {\r\n        });\r\n    }\r\n}\r\n\r\nexport function IItemIsItemWondrous(item: IItemJson): item is ItemWondrous {\r\n    var isType: boolean = true;\r\n\r\n    isType = isType && (item as ItemWondrous).type === \"Wondrous\";\r\n\r\n    return isType;\r\n}\r\n","import { ItemWeapon, IItemWeaponJson, IItemIsItemWeapon } from \"./ItemWeapon\";\r\nimport { ItemPotion, IItemPotionJson, IItemIsItemPotion } from './ItemPotion';\r\nimport { ItemArmor, IItemArmorJson, IItemIsItemArmor } from './ItemArmor';\r\nimport { ItemWondrous, IItemWondrousJson, IItemIsItemWondrous } from './ItemWondrous';\r\nimport { TItemType } from \"../Types/TItemType\";\r\nimport { IItemJson, IItem } from \"../Interfaces/IItem\";\r\n\r\n/**\r\n * @description A class used to fetch items based on a specific index and call.\r\n * \r\n * In future, recall that this link explains how to self-initialize:\r\n * https://basarat.gitbooks.io/typescript/docs/tips/staticConstructor.html\r\n */\r\nexport class ItemSource {\r\n    private readonly _tableName: string = 'LantsPants.Items'\r\n\r\n    private static instance: ItemSource;\r\n\r\n    private constructor() { }\r\n\r\n    public static GetInstance() {\r\n        if (!ItemSource.instance) {\r\n            ItemSource.instance = new ItemSource();\r\n        }\r\n\r\n        return ItemSource.instance;\r\n    }\r\n\r\n    /**\r\n     * @description Finds the item under the specified index, and returns that item. If the item cannot be\r\n     * found, returns undefined instead. This function returns undefined such that a caller can determine how\r\n     * to handle the missing element, rather than throw an exception.\r\n     * @param index The index to search for the item.\r\n     * @param type The type of item to search for.\r\n     */\r\n    static GetItem(index: string, type: TItemType): IItem | undefined {\r\n        var item: IItemJson | undefined = undefined;\r\n        var listToSearch: IItemJson[] | undefined = undefined;\r\n        var constructedItem: IItem | undefined = undefined;\r\n\r\n        switch (type) {\r\n            case \"Weapon\":\r\n                listToSearch = ItemMap_Weapons;\r\n                break;\r\n            case \"Armor\":\r\n                listToSearch = ItemMap_Armor;\r\n                break;\r\n            case \"Potion\":\r\n                listToSearch = ItemMap_Potions;\r\n                break;\r\n            case \"Wondrous\":\r\n                listToSearch = ItemMap_Wondrous;\r\n                break;\r\n            default:\r\n                listToSearch = undefined;\r\n                break;\r\n        }\r\n        \r\n        if (listToSearch !== undefined) {\r\n            for (let i = 0; i < listToSearch.length; i++) {\r\n                let currentItem = listToSearch[i];\r\n                if (currentItem.key === index) {\r\n                    item = currentItem;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (item !== undefined) {\r\n            if (IItemIsItemWeapon(item)) {\r\n                constructedItem = ItemWeapon.fromJson(item)\r\n            }\r\n            else if (IItemIsItemArmor(item)) {\r\n                constructedItem = ItemArmor.fromJson(item);\r\n            }\r\n            else if (IItemIsItemPotion(item)) {\r\n                constructedItem = ItemPotion.fromJson(item);\r\n            }\r\n            else if (IItemIsItemWondrous(item)) {\r\n                constructedItem = ItemWondrous.fromJson(item);\r\n            }\r\n        }\r\n\r\n        return constructedItem;\r\n    }\r\n}\r\n\r\n/**\r\n * The purpose of the following classes and constants is to act as a proxy for a server. This will likely all\r\n * go away if/when this software switches to use AWS or something similar.\r\n */\r\nconst ItemMap_Weapons: Array<IItemWeaponJson> =\r\n[\r\n    {\r\n        key: 'Club',\r\n        title: 'Club',\r\n        description: 'A stout bludgeoning weapon made of oak.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/club.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Light\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Whack\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Dagger',\r\n        title: 'Dagger',\r\n        description: 'A small piercing weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/dagger.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Light\",\r\n            \"Finesse\",\r\n            \"Thrown\"\r\n        ],\r\n        itemCost: 2,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Stab\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Greatclub',\r\n        title: 'Greatclub',\r\n        description: 'A massive bludgeoning weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/greatclub.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"TwoHanded\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Smash\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 8,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Handaxe',\r\n        title: 'Handaxe',\r\n        description: 'A small throwing axe.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/handaxe.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Light\",\r\n            \"Thrown\"\r\n        ],\r\n        itemCost: 5,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Hack\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Javelin',\r\n        title: 'Javelin',\r\n        description: 'A long, pointed, throwing weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/javelin.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 30,\r\n        longRange: 120,\r\n        properties: [\r\n            \"Thrown\"\r\n        ],\r\n        itemCost: 5,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Poke\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'LightHammer',\r\n        title: 'Light Hammer',\r\n        description: 'A small bludgeoning weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/light_hammer.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Light\",\r\n            \"Thrown\"\r\n        ],\r\n        itemCost: 2,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Smack\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Mace',\r\n        title: 'Mace',\r\n        description: 'A bludgeoning weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/mace.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n        ],\r\n        itemCost: 5,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Smash\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Quarterstaff',\r\n        title: 'Quarterstaff',\r\n        description: 'A long, bludgeoning weapon made of oak.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/quarterstaff.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Versatile\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Whap (1h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ],\r\n            \"Whap (2h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 8,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Sickle',\r\n        title: 'Sickle',\r\n        description: 'A curved weapon made of steel.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/sickle.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Light\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Slash\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Spear',\r\n        title: 'Spear',\r\n        description: 'A long, pointed weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/spear.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Thrown\",\r\n            \"Versatile\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Stab (1h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ],\r\n            \"Stab (2h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 8,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Shortsword',\r\n        title: 'Shortsword',\r\n        description: 'A short, pointed weapon.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/shortsword.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Finesse\",\r\n            \"Light\"\r\n        ],\r\n        itemCost: 10,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Stab\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'SnakeStaff',\r\n        title: 'Snake Staff',\r\n        description: 'The staff is wrapped by the likeness of a clay snake.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/Cleric Staff Snake Green.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"TwoHanded\"\r\n        ],\r\n        itemCost: 100,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Curse\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    },\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Poison\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Darts',\r\n        title: 'Darts',\r\n        description: 'A small thrown weapon. 20 darts line a leather pouch.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/dart.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Finesse\",\r\n            \"Thrown\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Throw\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'LightCrossbow',\r\n        title: 'Light Crossbow',\r\n        description: 'A light, mechanical device used for firing arrows across large distances.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/light_crossbow.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 80,\r\n        longRange: 230,\r\n        properties: [\r\n            \"Ammunition\",\r\n            \"Loading\",\r\n            \"TwoHanded\"\r\n        ],\r\n        itemCost: 25,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Fire\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 8,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Shortbow',\r\n        title: 'Shortbow',\r\n        description: 'A long, curved piece of wood held taut by a length of wire.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/shortbow.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 80,\r\n        longRange: 230,\r\n        properties: [\r\n            \"Ammunition\",\r\n            \"TwoHanded\"\r\n        ],\r\n        itemCost: 25,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Fire\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 6,\r\n                        modifier: 0,\r\n                        damageType: \"Piercing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Sling',\r\n        title: 'Sling',\r\n        description: 'A small pocket held by two lengths of rope. When spun quickly, it can hurl projectiles at lethal speed.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/sling.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 30,\r\n        longRange: 120,\r\n        properties: [\r\n            \"Ammunition\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Throw\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 4,\r\n                        modifier: 0,\r\n                        damageType: \"Bludgeoning\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Battleaxe',\r\n        title: 'Battleaxe',\r\n        description: 'A large, double-bladed axe.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/battleaxe.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Versatile\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Slash (1h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 8,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ],\r\n            \"Slash (2h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 10,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Glaive',\r\n        title: 'Glaive',\r\n        description: 'A long polearm with a menacing length of steel at one end.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/glaive.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Heavy\",\r\n            \"Reach\",\r\n            \"TwoHanded\"\r\n        ],\r\n        itemCost: 1,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Slash\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 10,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n    {\r\n        key: 'Longsword',\r\n        title: 'Longsword',\r\n        description: 'A large, double-bladed axe.',\r\n        details: '',\r\n        iconSource: './images/Item_Shop/Items/Weapons/longsword.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        shortRange: 20,\r\n        longRange: 60,\r\n        properties: [\r\n            \"Versatile\"\r\n        ],\r\n        itemCost: 15,\r\n        type: \"Weapon\",\r\n        attacks: {\r\n            \"Slash (1h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 8,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ],\r\n            \"Slash (2h)\":\r\n                [\r\n                    {\r\n                        diceCount: 1,\r\n                        diceSize: 10,\r\n                        modifier: 0,\r\n                        damageType: \"Slashing\"\r\n                    }\r\n                ]\r\n        }\r\n    },\r\n]\r\n\r\nconst ItemMap_Potions: Array<IItemPotionJson> =\r\n[\r\n    {\r\n        key: 'SmallHealing',\r\n        title: 'Small Healing Potion',\r\n        description: 'A small healing potion.',\r\n        details: 'Heals 2d4+2 when consumed.',\r\n        iconSource: './images/Item_Shop/Items/Potions/LowHealthPotion.png',\r\n        source: \"Official\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: false,\r\n        itemCost: 50,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'SmallMana',\r\n        title: 'Small Mana Potion',\r\n        description: 'A small mana potion.',\r\n        details: 'Restores 1 level 1 spell slot when consumed.',\r\n        iconSource: './images/Item_Shop/Items/Potions/LowManaPotion.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: true,\r\n        itemCost: 100,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'DarkContract',\r\n        title: 'Potion of the Dark Contract',\r\n        description: 'A dark, bubbling brew.',\r\n        details: 'Light that enters the bottle does not return. On consuming this potion, take 2d4 necrotic damage. Your next attack gains bonus damage equal to twice the necrotic damage that you have taken.',\r\n        iconSource: './images/Item_Shop/Items/Potions/DarkContractPotion.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: false,\r\n        itemCost: 100,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'TiamatBrew',\r\n        title: \"Tiamat's Brew\",\r\n        description: 'A rainbow of shifting colors lives in this bottle.',\r\n        details: \"On consumption, cast the Dragon's Breath spell on self.\",\r\n        iconSource: './images/Item_Shop/Items/Potions/potion_tiamat.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: true,\r\n        itemCost: 100,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'PoisonousMiasma',\r\n        title: 'Poisonous Miasma',\r\n        description: 'A swirling, toxic potion. The likeness of a long, green, clay snake is enveloped around the bottle.',\r\n        details: 'When used, causes a weapon to deal an additional 2 poison damage to attacks that deal slashing or piercing damage. The effect lasts 24 hours. Application takes 1 minute, and this item is consumed on use.',\r\n        iconSource: './images/Item_Shop/Items/Potions/poison.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: false,\r\n        itemCost: 100,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'BurningMiasma',\r\n        title: 'Burning Miasma',\r\n        description: 'A swirling, heated potion. The likeness of a long, red, clay snake is enveloped around the bottle.',\r\n        details: 'When used, causes a weapon to deal an additional 2 fire damage to attacks that deal slashing or piercing damage. The effect lasts 24 hours. Application takes 1 minute, and this item is consumed on use.',\r\n        iconSource: './images/Item_Shop/Items/Potions/poison_burning.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: false,\r\n        itemCost: 100,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'ElectricMiasma',\r\n        title: 'Electric Miasma',\r\n        description: 'A swirling, shocking potion. The likeness of a long, yellow, clay snake is enveloped around the bottle.',\r\n        details: 'When used, causes a weapon to deal an additional 2 lightning damage to attacks that deal slashing or piercing damage. The effect lasts 24 hours. Application takes 1 minute, and this item is consumed on use.',\r\n        iconSource: './images/Item_Shop/Items/Potions/poison_lightning.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: false,\r\n        itemCost: 100,\r\n        type: \"Potion\",\r\n    },\r\n    {\r\n        key: 'AngelicPotion',\r\n        title: 'Angelic Potion',\r\n        description: 'A large, winged potion. The bottle is miraculously light.',\r\n        details: 'Bubbles rise endlessly from the bottom of the glass. When consumed, heals 2d4+2 hitpoints and grants the user the ability to fly for the next 18 seconds (3 rounds of combat).',\r\n        iconSource: './images/Item_Shop/Items/Potions/AngelicPotion.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: false,\r\n        modifications: [],\r\n        hasWithdrawalEffect: true,\r\n        itemCost: 250,\r\n        type: \"Potion\",\r\n    },\r\n]\r\n\r\nconst ItemMap_Armor: Array<IItemArmorJson> = [];\r\n\r\nconst ItemMap_Wondrous: Array<IItemWondrousJson> =\r\n[\r\n    {\r\n        key: 'FireyRing',\r\n        title: 'Firey Ring',\r\n        description: 'A golden ring with a ruby fastened to its exterior. The ring is warm to the touch.',\r\n        details: 'Grants the bearer access to the Fire Bolt cantrip. If the user has no spellcasting modifier, they may use their Wisdom modifier. Wearing more than one spell-ring at once will cause the user to take 1 level of exhaustion every 10 seconds.',\r\n        iconSource: './images/Item_Shop/Items/Rings/Ring Jewel Red.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: true,\r\n        modifications: [],\r\n        itemCost: 100,\r\n        type: \"Wondrous\",\r\n    },\r\n    {\r\n        key: 'FrigidRing',\r\n        title: 'Frigid Ring',\r\n        description: 'A silver ring with a sapphire fastened to its exterior. The ring is cold to the touch.',\r\n        details: 'Grants the bearer access to the Ray of Frost cantrip. If the user has no spellcasting modifier, they may use their Wisdom modifier. Wearing more than one spell-ring at once will cause the user to take 1 level of exhaustion every 10 seconds.',\r\n        iconSource: './images/Item_Shop/Items/Rings/Ring Silver Jewel Green.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: true,\r\n        modifications: [],\r\n        itemCost: 100,\r\n        type: \"Wondrous\",\r\n    },\r\n    {\r\n        key: 'FloralRing',\r\n        title: 'Ring of Floral Accomodation',\r\n        description: 'A silver ring with the likeness of a pink rose fastened to its exterior.',\r\n        details: 'When touched to any surface, that surface will sprout flowers at a rapid pace for the next 6 seconds.',\r\n        iconSource: './images/Item_Shop/Items/Rings/Ring Floral.png',\r\n        source: \"Homebrew\",\r\n        requiresAttunement: true,\r\n        modifications: [],\r\n        itemCost: 50,\r\n        type: \"Wondrous\",\r\n    },\r\n]\r\n","import { ItemSource } from \"../../Classes/ItemSource\";\r\nimport { IItem } from \"../../Interfaces/IItem\";\r\nimport { TItemType } from \"../../Types/TItemType\";\r\n\r\n/**\r\n * @description A class used to represent a 'carpet'. A carpet is a section of an item shop, where\r\n * similar items are grouped together.\r\n */\r\nexport class CarpetMap {\r\n    /**\r\n     * @description The name to display above the rug.\r\n     */\r\n    rugName: string = \"\";\r\n\r\n    /**\r\n     * @description The items that are contained within the rug.\r\n     */\r\n    items: IItem[] = [];\r\n\r\n    /**\r\n     * @description The border source image to display around the rug. The syntax for this should be:\r\n     * \"url(/images/Item_Shop/Items/Rugs/purplerug.png)\"\r\n     * \r\n     * where the root folder is the public folder.\r\n     */\r\n    rugBorderSource: string = \"\";\r\n\r\n    /**\r\n     * @description The constructor for this object.\r\n     * @param rugName The name to display above the rug.\r\n     * @param borderSource The url source for the border image to display around the rug.\r\n     * @param weapons A list of weapon item keys to include within this rug.\r\n     * @param armor A list of armor item keys to include within this rug.\r\n     * @param potions A list of potion item keys to include within this rug.\r\n     * @param wondrous A list of wondrous item keys to include within this rug.\r\n     */\r\n    public constructor(\r\n        rugName: string,\r\n        borderSource: string,\r\n        itemType: TItemType,\r\n        items: string[])\r\n    {\r\n        this.rugName = rugName;\r\n        this.rugBorderSource = borderSource;\r\n\r\n        items.forEach(item => {\r\n            var itemLookup: IItem | undefined = ItemSource.GetItem(item, itemType);\r\n            if (itemLookup !== undefined) {\r\n                this.items.push(itemLookup);\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n/**\r\n * @description A constant used to keep track of a set of 'default' rugs. This is primarily for demonstration\r\n * purposes, and will be removed eventually.\r\n */\r\nexport const CarpetMaps: CarpetMap[] = [\r\n    new CarpetMap(\"Simple Weapons\", \"url(/images/Item_Shop/Items/Rugs/purplerug.png)\", \"Weapon\", [\"Club\", \"Dagger\", \"Greatclub\", \"Handaxe\", \"Javelin\", \"LightHammer\", \"SnakeStaff\", \"Quarterstaff\", \"Spear\", \"Shortsword\", \"Shortbow\"]),\r\n    new CarpetMap(\"Potions\", \"url(/images/Item_Shop/Items/Rugs/greenrug.png)\", \"Potion\", [\"SmallHealth\", \"SmallMana\", \"DarkContract\", \"TiamatBrew\", \"Angelic\", \"MiasmaBurning\"]),\r\n    new CarpetMap(\"Wondrous Items\", \"url(/images/Item_Shop/Items/Rugs/bluerug.png)\", \"Wondrous\", [\"RedRing\", \"BlueRing\", \"FloralRing\"]),\r\n]\r\n","import React from 'react';\r\nimport { Modal, Alert, Spinner, Button, AlertProps } from 'react-bootstrap';\r\nimport { IItem, IItemJson } from '../../Interfaces/IItem';\r\nimport { TSourceType } from '../../Types/TSourceType';\r\n\r\ninterface IItemDetailsModalState {\r\n    showAlert: boolean;\r\n}\r\n\r\ninterface IItemDetailsModalProps {\r\n    show: boolean;\r\n    hideModal: () => void;\r\n    itemDetails: IItem;\r\n}\r\n\r\nexport class ItemDetailsModal extends React.Component<IItemDetailsModalProps, IItemDetailsModalState> {\r\n    /**\r\n     * @description Performs an enum-<p> lookup to get something nice and pixelated to represent the source\r\n     * of the item that is being displayed.\r\n     * @param source The source to lookup and return a <p> element that represents it.\r\n     */\r\n    private getSourceText(source: TSourceType) {\r\n        switch (source) {\r\n            case \"Official\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(255, 200, 37)' }}>Official</p>);\r\n                }\r\n            case \"Homebrew\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(147, 56, 143)' }}>Homebrew</p>);\r\n                }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @description Performs an enum-<p> lookup to get something nice and pixelated to represent the type\r\n     * of the item that is being displayed.\r\n     * @param type The item to lookup and return a <p> element that represents it.\r\n     */\r\n    private getTypeDisplay(item: IItemJson) {\r\n        switch (item.type) {\r\n            case \"Weapon\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(199, 207, 221)' }}>Weapon</p>);\r\n                }\r\n            case \"Armor\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(148, 253, 255)' }}>Armor</p>);\r\n                }\r\n            case \"Potion\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(253, 210, 237)' }}>Potion</p>);\r\n                }\r\n            case \"Wondrous\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(255, 235, 87)' }}>Wondrous Item</p>);\r\n                }\r\n            default:\r\n                {\r\n                    return (<p style={{ color: 'rgb(255, 235, 87)' }}>Wondrous Item</p>);\r\n                }\r\n        }\r\n    }\r\n\r\n    public constructor(props: IItemDetailsModalProps) {\r\n        super(props);\r\n        this.state = {\r\n            showAlert: false\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal\r\n                show={this.props.show}\r\n                onHide={this.props.hideModal}\r\n                centered={true}>\r\n                <Modal.Header>\r\n                    <Modal.Title className=\"pixel-font\">\r\n                        {this.props.itemDetails.title}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div className='item-preview'>\r\n                        <img src={this.props.itemDetails.iconSource} width={128} height={128} alt=\"item preview\" />\r\n                    </div>\r\n                    <hr className='white-hr' />\r\n                    <div className='item-details pixel-font'>\r\n                        <div className='item-tag'>\r\n                            {this.getSourceText(this.props.itemDetails.source)}\r\n                        </div>\r\n                        <div className='item-tag'>\r\n                            {`${this.props.itemDetails.itemCost}x`}\r\n                            <img src='./images/Item_Shop/itemCoin.gif' alt=\"animated coin icon\" />\r\n                        </div>\r\n                        <div className='item-tag'>\r\n                            {this.getTypeDisplay(this.props.itemDetails)}\r\n                        </div>\r\n                    </div>\r\n                    <hr className='white-hr' />\r\n                    {this.props.itemDetails.RenderItemDescription()}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant='dark' onClick={this.props.hideModal}>Close</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\n// <Modal\r\n//     show={this.props.show}\r\n//     onHide={this.props.hideModal}\r\n//     centered={true}>\r\n//     <Modal.Header>\r\n//         <Modal.Title className=\"pixel-font\">\r\n//             {this.props.itemDetails.title}\r\n//         </Modal.Title>\r\n//     </Modal.Header>\r\n//     <Modal.Body>\r\n//         <Alert\r\n//             variant={this.props.inventoryAlertStyle}\r\n//             show={this.state.showAlert}>\r\n//             <Spinner animation=\"grow\" variant={this.props.inventoryAlertStyle} />\r\n//             Added item to inventory!\r\n//                 </Alert>\r\n//         <div className='item-preview'>\r\n//             <img src={this.props.itemDetails.iconSource} width={128} height={128} alt=\"item preview\" />\r\n//         </div>\r\n//         <hr className='white-hr' />\r\n//         <div className='item-details pixel-font'>\r\n//             <div className='item-tag'>\r\n//                 {this.getSourceText(this.props.itemDetails.source)}\r\n//             </div>\r\n//             <div className='item-tag'>\r\n//                 {`${this.props.itemDetails.itemCost}x`}\r\n//                 <img src='./images/Item_Shop/itemCoin.gif' alt=\"animated coin icon\" />\r\n//             </div>\r\n//             <div className='item-tag'>\r\n//                 {this.getTypeDisplay(this.props.itemDetails)}\r\n//             </div>\r\n//         </div>\r\n//         <hr className='white-hr' />\r\n//         {this.props.itemDetails.RenderItemDescription()}\r\n//     </Modal.Body>\r\n//     <Modal.Footer>\r\n//         <Button variant='dark' onClick={this.props.hideModal}>Close</Button>\r\n//     </Modal.Footer>\r\n// </Modal>","import { ICharacterDataSerializable } from './ICharacterDataSerializable';\r\nimport { IItem, IItemJson } from './IItem';\r\nimport { ItemSource } from '../Classes/ItemSource';\r\n\r\nexport class CharacterData implements ICharacterDataSerializable {\r\n    characterName: string = \"\";\r\n    itemData: IItem[] = [];\r\n\r\n    public Serialize(): string {\r\n        var jsonItems: IItemJson[] = this.itemData.map(item => {\r\n            return item as IItemJson;\r\n        })\r\n\r\n        var serializedString: ICharacterDataSerializable = {\r\n            characterName: this.characterName,\r\n            itemData: jsonItems\r\n        };\r\n\r\n        return JSON.stringify(serializedString);\r\n    }\r\n\r\n    public static DeSerialize(serializedData: string): CharacterData {\r\n        var retVal: CharacterData = new CharacterData();\r\n        var parsedJson: any = JSON.parse(serializedData);\r\n\r\n        // This works to get the character details, but doesn't strongly type or construct anything.\r\n        var assignedObject: CharacterData =  Object.assign(retVal, parsedJson);\r\n\r\n        // Fetch the actual item we're planning to use from the item source. This lets us pass the\r\n        // full-blown item around.\r\n        var createdItems: (IItem | undefined)[] = assignedObject.itemData.map(i => {\r\n            return ItemSource.GetItem(i.key, i.type);\r\n        });\r\n\r\n        // Filter out any undefined items.\r\n        assignedObject.itemData = createdItems.filter(i => i !== undefined) as IItem[];\r\n\r\n        return assignedObject;\r\n    }\r\n}\r\n","import { LantsPantsUserData } from './LantsPantsUserData';\r\nimport * as BCrypt from 'bcryptjs';\r\nimport firebase from 'firebase';\r\nimport { CharacterData } from '../../Items/Interfaces/CharacterData';\r\n\r\nexport interface LoginResponse {\r\n    DidLogin: boolean;\r\n    Errors: string[];\r\n}\r\n\r\nexport type TAuthState = \"Authorized\" | \"Unauthorized\" | \"Checking\";\r\n\r\n/**\r\n * Describes a response from creating a userin the database.\r\n */\r\nexport interface CreateUserResponse {\r\n    /**\r\n     * True if the user was successfully created in the database. False otherwise.\r\n     */\r\n    DidCreate: boolean;\r\n\r\n    /**\r\n     * A list of any errors that were encountered when attempting to create a user.\r\n     */\r\n    Errors: string[];\r\n}\r\n\r\n/**\r\n * A class used for authorizing user credentials and fetching user data.\r\n */\r\nexport class UserDataAuth {\r\n    /**\r\n     * Describes the singleton instance for this class.\r\n     */\r\n    private static _instance: UserDataAuth;\r\n\r\n    /**\r\n     * Describes the current authorization state for user authorization.\r\n     */\r\n    private _authState: TAuthState;\r\n\r\n    /**\r\n     * A salt used for BCrypt encryption whenever evaluating user passwords.\r\n     */\r\n    private salt: string;\r\n\r\n    /**\r\n     * The user data that is being stored after authorizing user credentials.\r\n     */\r\n    private _userData: LantsPantsUserData | undefined;\r\n\r\n    /**\r\n     * The user's username that is being stored after authorizing user credentials.\r\n     */\r\n    private _username: string = \"\";\r\n\r\n    /**\r\n     * The maximum length of allowed passwords.\r\n     */\r\n    public static readonly MaxPasswordLength = 60;\r\n    private static readonly collection_UserWritable = \"userWritable\";\r\n    private _snapshotListener: () => void = () => {};\r\n\r\n    /**\r\n     * Gets the current authorization state for user authorization.\r\n     */\r\n    public get AuthState(): TAuthState {\r\n        return this._authState;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    public get UserData(): LantsPantsUserData | undefined {\r\n        return this._userData;\r\n    }\r\n\r\n    public get Username(): string {\r\n        return this._username;\r\n    }\r\n\r\n    /**\r\n     * Creates a new instance of this object.\r\n     */\r\n    private constructor() {\r\n        this._authState = \"Checking\";\r\n        this._userData = undefined;\r\n        this.salt = BCrypt.genSaltSync();\r\n\r\n        // Your web app's Firebase configuration\r\n        var firebaseConfig = {\r\n            apiKey: \"AIzaSyD-s5zfMiZavJc8J0qsCVIpzSysbaRG7kU\",\r\n            authDomain: \"test-project-a4c30.firebaseapp.com\",\r\n            databaseURL: \"https://test-project-a4c30.firebaseio.com\",\r\n            projectId: \"test-project-a4c30\",\r\n            storageBucket: \"test-project-a4c30.appspot.com\",\r\n            messagingSenderId: \"553146248685\",\r\n            appId: \"1:553146248685:web:b24bdb19f4a400f3550be4\",\r\n            measurementId: \"G-Y6PMKS1PHP\"\r\n        };\r\n\r\n        // Initialize Firebase\r\n        firebase.initializeApp(firebaseConfig);\r\n        firebase.analytics()\r\n\r\n        // Add a listener for auth state changing.\r\n        firebase.auth().onAuthStateChanged(this.HandleAuthStateChanged);\r\n    }\r\n\r\n    private GetUid(): string | undefined {\r\n        var uid = firebase.auth().currentUser?.uid;\r\n        if (!uid) {\r\n            uid = undefined;\r\n        }\r\n        return uid;\r\n    }\r\n\r\n\r\n    /**\r\n     * Deserialize the data snapshot that is returned form the firestore.\r\n     */\r\n    private DeserializeCharData(docSnapshot: firebase.firestore.DocumentSnapshot): CharacterData[] {\r\n        var charData: CharacterData[] = [];\r\n\r\n        if (docSnapshot.exists) {\r\n            var docData = docSnapshot.data();\r\n            if (docData !== undefined) {\r\n                var serializedData: string[] = docData.characterData;\r\n                if (serializedData) {\r\n                    charData = serializedData.map(s => CharacterData.DeSerialize(s));\r\n                }\r\n            }\r\n        }\r\n\r\n        return charData;\r\n    }\r\n\r\n    private InitializeAfterAuth(): void {\r\n        var uid = this.GetUid();\r\n\r\n        // Add a listener for specific documents that change on the remote.\r\n        // https://firebase.google.com/docs/firestore/query-data/listen\r\n        firebase\r\n            .firestore()\r\n            .collection(UserDataAuth.collection_UserWritable)\r\n            .doc(uid)\r\n            .onSnapshot((doc: firebase.firestore.DocumentSnapshot) => {\r\n                var charData: CharacterData[] = this.DeserializeCharData(doc);\r\n                console.log(\"Snapshot data: \" + charData);\r\n                this.onUserDataChanged_notify(charData);\r\n            });\r\n\r\n        var email = firebase.auth().currentUser?.email;\r\n        if (email && email !== undefined) {\r\n            this._username = email;\r\n        }\r\n    }\r\n    \r\n    private UnsubscribeSnapshotListener(): void {\r\n        // Calling this listener will unsubscribe from this event.\r\n        this._snapshotListener();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param user \r\n     */\r\n    private HandleAuthStateChanged(user: firebase.User | null): void {\r\n        if (user) {\r\n            UserDataAuth.GetInstance()._authState = \"Authorized\";\r\n            console.log(\"User \" + user.uid + \" has logged in.\")\r\n\r\n            UserDataAuth.GetInstance().InitializeAfterAuth();\r\n        }\r\n        else {\r\n            // This means that either the auth has initialized, or that someone has logged out.\r\n            UserDataAuth.GetInstance()._authState = \"Unauthorized\";\r\n            console.log(\"User has logged out.\")\r\n\r\n            UserDataAuth.GetInstance().UnsubscribeSnapshotListener();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Logs out from any current user instances.\r\n     */\r\n    public Logout(): void {\r\n        firebase.auth().signOut();\r\n    }\r\n\r\n    /**\r\n     * Logs into a user instance using an email-password combination.\r\n     * @param email The email of the user to login.\r\n     * @param password The password of the user to login.\r\n     */\r\n    public async Login(email: string, password: string): Promise<LoginResponse> {\r\n        var loginResponse: LoginResponse = {\r\n            DidLogin: false,\r\n            Errors: []\r\n        };\r\n\r\n        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\r\n            .catch(function (error) {\r\n                var errorMessage = error.message;\r\n                console.error(errorMessage);\r\n                loginResponse.Errors.push(errorMessage);\r\n            });\r\n        \r\n        await firebase.auth().signInWithEmailAndPassword(email, password)\r\n            .then(function (credentials: firebase.auth.UserCredential) {\r\n                loginResponse.DidLogin = true;\r\n            })\r\n            .catch(function (error) {\r\n                var errorMessage = error.message;\r\n                console.error(errorMessage);\r\n                loginResponse.Errors.push(errorMessage);\r\n            });\r\n        \r\n        return loginResponse;\r\n    }\r\n\r\n    /**\r\n     * Creates a new user asynchronously.\r\n     * @param email The email of the new user to create.\r\n     * @param password The password for the new user.\r\n     * @param passwordDupe A duplicate of the password that the user has provided.\r\n     */\r\n    public async CreateAccount(email: string, password: string, passwordDupe: string): Promise<CreateUserResponse> {\r\n        var createResponse: CreateUserResponse = {\r\n            DidCreate: false,\r\n            Errors: []\r\n        };\r\n\r\n        // This may be a little overkill, but don't compare plaintext passwords, use something more robust\r\n        // like BCrypt to compare.\r\n        var passwordHash: string = BCrypt.hashSync(password, this.salt);\r\n        var passwordsMatch: boolean = BCrypt.compareSync(passwordDupe, passwordHash);\r\n\r\n        // Validate that the passwords match.\r\n        if (!passwordsMatch) {\r\n            createResponse.Errors.push(\"Your passwords did not match.\");\r\n        }\r\n\r\n        if (password.length < 6) {\r\n            createResponse.Errors.push(\"Passwords must be at least 6 characters long.\");\r\n        }\r\n\r\n        if (createResponse.Errors.length <= 0) {\r\n            await firebase.auth().createUserWithEmailAndPassword(email, password).then(\r\n                fulfilledValue => {\r\n                    console.log(fulfilledValue);\r\n                }\r\n                , rejectedValue => {\r\n                    console.error(rejectedValue);\r\n                    createResponse.Errors.push(rejectedValue.message);\r\n                });\r\n        }\r\n\r\n        if (!createResponse.DidCreate) {\r\n            createResponse.Errors.push(\"There was a problem when creating this account. Please try again.\");\r\n        }\r\n\r\n        return createResponse;\r\n    }\r\n\r\n    /**\r\n     * Checks for access being granted to the user.\r\n     */\r\n    public async CheckForAccess(): Promise<boolean> {\r\n        if (this._authState === \"Checking\") {\r\n            await new Promise<void>((resolve, reject) => {\r\n                // Reject the promise if we wait > X seconds before getting a response.\r\n                var timeoutWaiting = setTimeout(() => reject(), 10000);\r\n\r\n                firebase.auth().onAuthStateChanged(function(user) {\r\n                    // If we got an answer, don't reject.\r\n                    window.clearTimeout(timeoutWaiting);\r\n                    resolve();\r\n                });\r\n            });\r\n        }\r\n\r\n        return this._authState === \"Authorized\";\r\n    }\r\n\r\n    /**\r\n     * Updates the backend with the character data that we need to update.\r\n     */\r\n    public async UpdateCharacterData(charData: CharacterData[]): Promise<void> {\r\n        var uid = this.GetUid();\r\n        var serializedData: string[] = charData.map(i => i.Serialize());\r\n\r\n        return firebase\r\n            .firestore()\r\n            .collection(UserDataAuth.collection_UserWritable)\r\n            .doc(uid)\r\n            .set({\r\n                characterData: serializedData\r\n            }).then(resolved => {\r\n                console.log(\"Successfully wrote character data.\\n\" + serializedData);\r\n            }).catch(reason => {\r\n                console.error(\"Failed to write character data.\\n\" + reason);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Fetches new character data from the backend.\r\n     */\r\n    public async FetchCharacterData(): Promise<CharacterData[]> {\r\n        var uid = this.GetUid();\r\n\r\n        var docSnapshot = await firebase\r\n            .firestore()\r\n            .collection(UserDataAuth.collection_UserWritable)\r\n            .doc(uid)\r\n            .get();\r\n\r\n        var charData = this.DeserializeCharData(docSnapshot);\r\n\r\n        return charData;\r\n    }\r\n\r\n    /**\r\n     * Gets the singleton instance of this object.\r\n     */\r\n    public static GetInstance(): UserDataAuth {\r\n        if (!this._instance) {\r\n            this._instance = new UserDataAuth();\r\n        }\r\n\r\n        return this._instance;\r\n    }\r\n\r\n    private onUserDataChanged_listeners: ((userdata: CharacterData[]) => void)[] = [];\r\n\r\n    private onUserDataChanged_notify(userData: CharacterData[]) {\r\n        this.onUserDataChanged_listeners.forEach(e => e(userData));\r\n    }\r\n\r\n    public onUserDataChanged(e: (userdata: CharacterData[]) => void) {\r\n        this.onUserDataChanged_listeners.push(e);\r\n    }\r\n}\r\n","import { UserDataAuth } from '../../Login/Classes/UserDataAuth'\r\nimport { CharacterData } from '../Interfaces/CharacterData';\r\nimport { IItem } from '../Interfaces/IItem';\r\nimport { TItemType } from '../Types/TItemType';\r\nimport { Item } from './Item';\r\n\r\nexport class CharacterState {\r\n    // https://regex101.com/r/AJU90m/1\r\n    private readonly _validCharnameCharacters: RegExp = /^[a-z0-9 ]{1,}$/i;\r\n    private static _instance: CharacterState\r\n    private onInventoryChanged_listeners: (() => void)[] = [];\r\n    private allCharactersData: CharacterData[] = [];\r\n    private static readonly currentCharacterStorage = \"charname\";\r\n    private _currentCharacter: string = \"\";\r\n\r\n    /**\r\n     * Creates a new instance of this class.\r\n     */\r\n    private constructor() {\r\n        const handleUpdatedInventory = (userData: CharacterData[]) => {\r\n            this.UpdateInventory(userData);\r\n        };\r\n\r\n        UserDataAuth.GetInstance().onUserDataChanged(handleUpdatedInventory.bind(this));\r\n\r\n        var storedCharName: string | null;\r\n        storedCharName = localStorage.getItem(CharacterState.currentCharacterStorage);\r\n\r\n        if (storedCharName) {\r\n            this._currentCharacter = storedCharName;\r\n        }\r\n\r\n        UserDataAuth.GetInstance().FetchCharacterData().then(charData => {\r\n            this.allCharactersData = charData;\r\n\r\n            // If no character name is defined, grab the first character that we can find, and use that\r\n            // instead of no name at all.\r\n            if (this.allCharactersData.length <= 0) {\r\n                this.AddCharacter();\r\n            }\r\n            else if (this._currentCharacter === \"\") {\r\n\r\n                var firstCharacterInList = this.allCharactersData.find(c => c.characterName !== \"\");\r\n\r\n                if (firstCharacterInList !== undefined) {\r\n                    this._currentCharacter = firstCharacterInList.characterName;\r\n                }\r\n            }\r\n\r\n            this.UpdateInventory(charData);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @description Adds a character to the list of characters in the inventory. New characters will start\r\n     * with an empty inventory.\r\n     */\r\n    public AddCharacter() {\r\n        var nameIsValid: boolean = false;\r\n        var charName: string = \"\";\r\n        var userHitCancel: Boolean = false;\r\n        var userUsedInvalidCharacters: Boolean = false;\r\n        var userEnteredExistingName: Boolean = false;\r\n\r\n        var atLeastOneValidNameExists: Boolean = this.allCharactersData.length > 0;\r\n\r\n        // Keep asking the user to display a name until they have some valid input, or until they hit cancel.\r\n        // Note that a user can only continue by hitting cancel if they have at least one valid name.\r\n        while (!nameIsValid && !(userHitCancel && atLeastOneValidNameExists)) {\r\n            let userPrompt: string = \"Please enter a character name.\";\r\n\r\n            if (userHitCancel && !atLeastOneValidNameExists) {\r\n                userPrompt = userPrompt + \" Use of the inventory system requires at least one character.\";\r\n            }\r\n            if (userUsedInvalidCharacters) {\r\n                userPrompt = userPrompt + \" Valid characters are alphanumerics and spaces.\";\r\n            }\r\n            if (userEnteredExistingName) {\r\n                userPrompt = userPrompt + \" Please enter a new, unused character name.\";\r\n            }\r\n\r\n            let input = prompt(userPrompt, \"Hurdy Gurdy\");\r\n\r\n            userHitCancel = input === null;\r\n\r\n            if (!userHitCancel) {\r\n                // They didn't hit cancel, so unless something else went wrong, this is fine.\r\n\r\n                nameIsValid = true;\r\n                let stringInput: string = input as string;\r\n\r\n                if (!this._validCharnameCharacters.test(stringInput)) {\r\n                    nameIsValid = false;\r\n                    userUsedInvalidCharacters = true;\r\n                }\r\n                if (this.allCharactersData.some(c => c.characterName === stringInput)) {\r\n                    nameIsValid = false;\r\n                    userEnteredExistingName = true;\r\n                }\r\n                if (nameIsValid) {\r\n                    charName = stringInput;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Save this as a new character.\r\n        var newCharData: CharacterData = new CharacterData();\r\n        newCharData.characterName = charName;\r\n        this.allCharactersData.push(newCharData);\r\n\r\n        // Switch to using the new character.\r\n        this._currentCharacter = charName;\r\n\r\n        // Save the new character to the database!\r\n        UserDataAuth.GetInstance().UpdateCharacterData(this.allCharactersData);\r\n    }\r\n\r\n    /**\r\n     * Gets the name of the currently selected character.\r\n     */\r\n    public get CurrentCharacter(): string {\r\n        return this._currentCharacter;\r\n    }\r\n\r\n    /**\r\n     * Sets the name for the currently selected character.\r\n     */\r\n    public set CurrentCharacter(newCharName: string) {\r\n        this._currentCharacter = newCharName;\r\n\r\n        // If the current character doesn't already exist, go ahead and give it some new information.\r\n        // This should behave similar to dictionaries in C#.\r\n        if (!this.allCharactersData.some(c => c.characterName === newCharName)) {\r\n            var newCharData = new CharacterData();\r\n            newCharData.characterName = newCharName;\r\n\r\n            this.allCharactersData.push(newCharData);\r\n        }\r\n\r\n        localStorage.setItem(CharacterState.currentCharacterStorage, this._currentCharacter);\r\n    }\r\n\r\n    /**\r\n     * Gets the singleton instance of this class.\r\n     */\r\n    public static GetInstance(): CharacterState {\r\n        if (!this._instance) {\r\n            this._instance = new CharacterState()\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * Gets the inventory from the currently selected character.\r\n     */\r\n    public GetCharacterInventory(): CharacterData | undefined {\r\n        return this.allCharactersData.find(\r\n            data => data.characterName === this._currentCharacter);\r\n    }\r\n\r\n    /**\r\n     * Adds an item to the currently selected character.\r\n     * @param itemData The item to add.\r\n     */\r\n    public AddItemToCurrentCharacter(itemData: IItem): boolean {\r\n        return this.AddItem(this._currentCharacter, itemData);\r\n    }\r\n\r\n    /**\r\n     * Adds an item to the inventory of the specified character.\r\n     * @param charName The name of the character that the data needs to be added to.\r\n     * @param itemData The item data that will be added.\r\n     */\r\n    public AddItem(charName: string, itemData: IItem): boolean {\r\n        var didAdd: boolean = false;\r\n        \r\n        var charData: CharacterData | undefined = this.allCharactersData.find(\r\n            data => data.characterName === charName);\r\n\r\n        if (charData !== undefined && itemData !== undefined) {\r\n            charData.itemData.push(itemData);\r\n            didAdd = true;\r\n        }\r\n\r\n        /*\r\n         * Save the data. DO NOT TRY TO UPDATE HERE. The workflow should be:\r\n         *      -> An item gets added.\r\n         *      -> The backend gets notified via the firebase auth class.\r\n         *      -> The firebase auth class notifies THIS class that something is going to be updated.\r\n         * \r\n         * Why?\r\n         * \r\n         * The answer is that we only want to update when the server tells us that the add was fine, and\r\n         * not when 'just we' say that things are okay. This has several advantages:\r\n         *      1. If we update our inventory (on a mobile device, for example), we can see a live update\r\n         *         here.\r\n         * \r\n         *      2. Items are only added when some server validation applies (granted, firebase will \r\n         *         notify us that things have changed before a handshake by default, but this behavior is\r\n         *         configurable).\r\n         */\r\n        UserDataAuth.GetInstance().UpdateCharacterData(this.allCharactersData);\r\n\r\n        return didAdd;\r\n    }\r\n\r\n    /**\r\n     * Removes the specified item from the current character. Uses IItem's comparison string to evaluate\r\n     * equality.\r\n     * @param itemData The item that needs to be removed from the current character.\r\n     */\r\n    public RemoveItemFromCurrentCharacter(itemData: IItem): boolean {\r\n        return this.RemoveItem(this._currentCharacter, itemData);\r\n    }\r\n\r\n    /**\r\n     * Removes the specified item from the specified character. Uses IItem's comparison string to evaluate\r\n     * equality.\r\n     * @param charName The name of the character to remove an item from.\r\n     * @param itemData The item that needs to be removed from the specified character.\r\n     */\r\n    public RemoveItem(charName: string, itemData: IItem): boolean {\r\n        var didRemove: boolean = false;\r\n        var serializedItem: string =  itemData.GetEqualityString();\r\n        \r\n        var charData: CharacterData | undefined = this.allCharactersData.find(\r\n            data => data.characterName === charName);\r\n\r\n        if (charData !== undefined) {\r\n            var foundMatch: boolean = false;\r\n            var i = 0;\r\n            for(i = 0; i < charData.itemData.length; i++) {\r\n                if (charData.itemData[i].GetEqualityString() === serializedItem) {\r\n                    foundMatch = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (foundMatch) {\r\n                charData.itemData.splice(i, 1);\r\n                didRemove = true;\r\n            }\r\n        }\r\n\r\n        UserDataAuth.GetInstance().UpdateCharacterData(this.allCharactersData);\r\n\r\n        return didRemove;\r\n    }\r\n\r\n    /**\r\n     * Gets a series of items from the currently-selected character.\r\n     * @param itemType The type of item that we need to get from the current character.\r\n     */\r\n    public GetCurrentItemsOfType(itemType: TItemType): IItem[] {\r\n        return this.GetItemsOfType(this._currentCharacter, itemType);\r\n    }\r\n\r\n    /**\r\n     * Gets items of the specified type from the specified character.\r\n     * @param charName The character whose inventory we need to search.\r\n     * @param itemType The type of item that we need to get from the character.\r\n     */\r\n    public GetItemsOfType(charName: string, itemType: TItemType): IItem[] {\r\n        var items: IItem[] = [];\r\n\r\n        var charData: CharacterData | undefined = this.allCharactersData.find(\r\n            data => data.characterName === charName);\r\n\r\n        if (charData !== undefined) {\r\n            items = charData.itemData.filter(item => item.type === itemType);\r\n        }\r\n\r\n        return items;\r\n    }\r\n\r\n    /**\r\n     * Provides a listener for whenever the inventory that is stored by this class changes.\r\n     * @param e \r\n     */\r\n    public onInventoryChanged(e: () => void): void {\r\n        this.onInventoryChanged_listeners.push(e);\r\n    }\r\n\r\n    /**\r\n     * Updates the inventory that is stored by this class. Should notify any listeners once the inventory\r\n     * has been updated and applied.\r\n     * @param userData The user data that this class will provide a newly-updated inventory for.\r\n     */\r\n    private UpdateInventory(userData: CharacterData[]): void {\r\n        this.allCharactersData = userData;\r\n\r\n        // Notify listeners that we've CHAAAAANGED.\r\n        this.onUserDataChanged_notify();\r\n    }\r\n\r\n    /**\r\n     * Notifies any listeners that the user data has changed.\r\n     */\r\n    private onUserDataChanged_notify() {\r\n        this.onInventoryChanged_listeners.forEach(e => e());\r\n    }\r\n}\r\n","import './ItemShop.css';\r\nimport React from 'react';\r\n\r\nimport { IItemJson, IItem } from \"../../Interfaces/IItem\";\r\nimport { TSourceType } from \"../../Types/TSourceType\";\r\nimport { BazaarCarpet } from './BazaarCarpet';\r\nimport { CarpetMaps } from './CarpetMap';\r\nimport { ItemWondrous } from '../../Classes/ItemWondrous';\r\nimport { TAttack } from '../../Types/TAttack';\r\nimport { TItemClick } from '../Common/ItemCard';\r\nimport { ItemDetailsModal } from '../Common/ItemDetailsModal';\r\nimport { TPurchaseClick } from '../../Types/CardButtonCallbackTypes/TPurchaseClick';\r\nimport { ItemSource } from '../../Classes/ItemSource';\r\nimport { CharacterState } from '../../Classes/CharacterState';\r\n\r\n/**\r\n * @description\r\n * Describes the properties that are passed into this class.\r\n */\r\ninterface IItemShopProps {\r\n};\r\n\r\n/**\r\n * @description Describes the state that is maintained by this object.\r\n * @param showItemDialog A boolean value to describe whether the item dialog (modal) is displayed at any\r\n * given point.\r\n * @param itemDetails A set of details that describe the currently selected item. This is used to populate\r\n * the modal that appears.\r\n */\r\ninterface IItemShopState {\r\n    showItemDialog: boolean;\r\n    itemDetails: IItem;\r\n};\r\n\r\n/**\r\n * @description\r\n * Represents an item shop! This is a full-screen application that is used to 'browse' some digital items.\r\n */\r\nexport class ItemShop extends React.Component<IItemShopProps, IItemShopState> {\r\n    /**\r\n     * @description Creates a new instance of @see ItemShop .\r\n     * @param props The properties required to instantiate this class.\r\n     */\r\n    constructor(props: IItemShopProps) {\r\n        super(props);\r\n        this.state = {\r\n            showItemDialog: false,\r\n            itemDetails: new ItemWondrous(),\r\n        };\r\n        // console.log(process.env.REACT_APP_TEST_KEY);\r\n        ItemSource.GetInstance();\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Shows or hides the item details modal.\r\n     * @param show If true, show the modal; otherwise false.\r\n     */\r\n    setModalVisiblity(show: boolean) {\r\n        this.setState({\r\n            showItemDialog: show,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description Handles an item click event.\r\n     * @param item The item details that are provided as a result of the click event (this is a set of\r\n     * properties that represent the item that was clicked).\r\n     */\r\n    onItemClick(item: IItem) {\r\n        this.setState({\r\n            itemDetails: item,\r\n        });\r\n\r\n        this.setModalVisiblity(true);\r\n    }\r\n\r\n    /**\r\n     * @description Performs an enum-<p> lookup to get something nice and pixelated to represent the source\r\n     * of the item that is being displayed.\r\n     * @param source The source to lookup and return a <p> element that represents it.\r\n     */\r\n    getSourceText(source: TSourceType) {\r\n        switch (source) {\r\n            case \"Official\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(255, 200, 37)' }}>Official</p>);\r\n                }\r\n            case \"Homebrew\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(147, 56, 143)' }}>Homebrew</p>);\r\n                }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @description Performs an enum-<p> lookup to get something nice and pixelated to represent the type\r\n     * of the item that is being displayed.\r\n     * @param type The item to lookup and return a <p> element that represents it.\r\n     */\r\n    getTypeDisplay(item: IItemJson) {\r\n        switch (item.type) {\r\n            case \"Weapon\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(199, 207, 221)' }}>Weapon</p>);\r\n                }\r\n            case \"Armor\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(148, 253, 255)' }}>Armor</p>);\r\n                }\r\n            case \"Potion\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(253, 210, 237)' }}>Potion</p>);\r\n                }\r\n            case \"Wondrous\":\r\n                {\r\n                    return (<p style={{ color: 'rgb(255, 235, 87)' }}>Wondrous Item</p>);\r\n                }\r\n            default:\r\n                {\r\n                    return (<p style={{ color: 'rgb(255, 235, 87)' }}>Wondrous Item</p>);\r\n                }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description Gets a list of bazaar carpets for display.\r\n     * @param onItemClick The click event-handler for item clicks.\r\n     */\r\n    getBazaarCarpets(onItemClick: TItemClick, onItemPurchase: TPurchaseClick) {\r\n        return CarpetMaps.map((carpet) => {\r\n            return (\r\n                <BazaarCarpet\r\n                    onPurchaseClick={onItemPurchase}\r\n                    carpetMap={carpet}\r\n                    onItemClick={onItemClick}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        CharacterState.GetInstance();\r\n    }\r\n\r\n    /**\r\n     * @description Renders an instance of this class.\r\n     */\r\n    render() {\r\n        /* Keep these as consts because if we were to use a function callback when closing the Modal,\r\n         * that would result in an exception (because we're then in a state that doesn't recognize)\r\n         * ItemShop as 'this'. */\r\n\r\n        const handleItemClick: TItemClick = (itemDetails: IItem) => this.onItemClick(itemDetails);\r\n\r\n        const hideDetailsModal = () => {\r\n            this.setState({\r\n                showItemDialog: false,\r\n            });\r\n        };\r\n\r\n        const handlePurchaseItem: TPurchaseClick = (item: IItem) => {\r\n            CharacterState.GetInstance().AddItemToCurrentCharacter(item);\r\n        }\r\n\r\n        return (\r\n            <div className=\"ItemShop\">\r\n                <h1>Item Shop</h1>\r\n                <div className='shopkeeper-area'>\r\n                    <img src='./images/Item_Shop/brazier-lit.gif' alt=\"animated left brazier\" />\r\n                    <img src='./images/Item_Shop/shopkeeper.gif' alt=\"shopkeeper\" />\r\n                    <img src='./images/Item_Shop/brazier-lit.gif' alt=\"animated left brazier\" />\r\n                </div>\r\n                <div className='bazaar-area'>\r\n                    {this.getBazaarCarpets(handleItemClick, handlePurchaseItem)}\r\n                </div>\r\n                <ItemDetailsModal\r\n                    show={this.state.showItemDialog}\r\n                    hideModal={hideDetailsModal}\r\n                    itemDetails={this.state.itemDetails} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { TAttack } from '../../Types/TAttack';\r\nimport { Modal } from 'react-bootstrap';\r\nimport { TDamageType } from '../../Types/TDamageType';\r\n\r\ntype DamageRoll = {\r\n    damageType: TDamageType;\r\n    rolledNumbers: number[];\r\n    modifier: number;\r\n}\r\n\r\ninterface IAttackRollModalState {\r\n    attackRoll: number;\r\n    damageRoll: DamageRoll[];\r\n}\r\n\r\ninterface IAttackRollModalProps {\r\n    show: boolean;\r\n    attackName: string;\r\n    attacks: TAttack[];\r\n    onHide: () => void;\r\n}\r\n\r\nexport class AttackRollModal extends React.Component<IAttackRollModalProps, IAttackRollModalState> {\r\n    /**\r\n     * Generating a bunch of random numbers on the fly, in quick succession, is somewhat expensive, so \r\n     * intead use some pre-generated lists of numbers to flash at someone as the dice is being rolled.\r\n     * \r\n     * TODO: I really don't like relying on these arrays being the exact size as the timing array. Fix this.\r\n     */\r\n    private randomRollNumbers: number[][] = [\r\n        [8, 17, 4, 7, 2, 6, 11, 16, 1, 12, 15, 10, 18, 19, 5, 3, 14, 9, 13, 20],\r\n        [17, 4, 3, 10, 2, 14, 11, 19, 18, 5, 13, 20, 7, 16, 9, 6, 1, 15, 12, 8],\r\n        [12, 4, 6, 18, 15, 17, 19, 13, 14, 8, 7, 3, 9, 2, 16, 10, 1, 5, 20, 11],\r\n        [9, 8, 16, 13, 6, 15, 3, 2, 10, 4, 18, 7, 5, 1, 17, 12, 20, 19, 14, 11],\r\n        [4, 7, 2, 19, 10, 1, 6, 5, 13, 18, 8, 17, 14, 15, 11, 3, 20, 12, 16, 9],\r\n        [20, 5, 19, 9, 12, 16, 4, 10, 2, 17, 8, 15, 6, 7, 11, 1, 13, 3, 18, 14],\r\n        [17, 15, 14, 1, 16, 4, 20, 18, 19, 6, 8, 10, 9, 3, 13, 12, 2, 11, 7, 5],\r\n        [4, 2, 18, 9, 13, 20, 7, 1, 10, 8, 14, 16, 19, 15, 5, 11, 6, 17, 12, 3],\r\n        [6, 8, 14, 18, 7, 17, 20, 15, 11, 5, 2, 16, 3, 19, 12, 4, 10, 9, 13, 1],\r\n        [7, 20, 9, 8, 13, 19, 6, 15, 14, 18, 5, 3, 2, 12, 11, 1, 10, 17, 4, 16],\r\n    ]\r\n\r\n    private rollDelay: number[] = [\r\n        50, 100, 150, 200, 250, 300, 350, 400, 450, 550, 650, 750, 850, 950, 1050, 1250, 1500, 1800, 1800, 2150\r\n    ]\r\n\r\n    private rollDieAudio = new Audio(\"./sounds/rollDie.wav\");\r\n    private roll20Audio = new Audio(\"./sounds/roll20.wav\");\r\n    private roll1Audio = new Audio(\"./sounds/roll1.wav\");\r\n\r\n\r\n    private GetDieValue(dieFaces: number): number {\r\n        return Math.ceil(Math.random() * (dieFaces));\r\n    }\r\n\r\n    private RollAttack(): void {\r\n        var randomNumberList: number = Math.floor(Math.random() * this.randomRollNumbers.length);\r\n\r\n        for (let i: number = 0; i < this.rollDelay.length; i++) {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    attackRoll: this.randomRollNumbers[randomNumberList][i]\r\n                });\r\n            }, this.rollDelay[i])\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.setState({\r\n                attackRoll: this.GetDieValue(20)\r\n            })\r\n            if (this.state.attackRoll === 20) {\r\n                this.roll20Audio.play();\r\n            }\r\n            else if (this.state.attackRoll === 1) {\r\n                this.roll1Audio.play();\r\n            }\r\n        }, this.rollDelay[this.rollDelay.length - 1] + 350)\r\n    }\r\n\r\n    private RollDamage(): void {\r\n        var rolls: DamageRoll[] = this.props.attacks.map((attack) => {\r\n            let rolledNumbers: number[] = [];\r\n            for(let i = 0; i < attack.diceCount; i++) {\r\n                rolledNumbers.push(this.GetDieValue(attack.diceSize));\r\n            }\r\n\r\n            let roll: DamageRoll = {\r\n                damageType: attack.damageType,\r\n                rolledNumbers: rolledNumbers,\r\n                modifier: attack.modifier\r\n            };\r\n\r\n            return roll;\r\n        });\r\n\r\n        this.setState({\r\n            damageRoll: rolls\r\n        });\r\n    }\r\n\r\n    private GetDamageRollDisplay(): JSX.Element[] {\r\n        return this.state.damageRoll.map((roll) => {\r\n            var rollStatement: string = \"\";\r\n            \r\n            var diceRollsMessage: string = roll.rolledNumbers.join(\" + \");\r\n            var rollModifierMessage: string = roll.modifier > 0 ? ` + ${roll.modifier}` : '';\r\n            var damageMessage: string = `${roll.damageType} damage`;\r\n\r\n            rollStatement = `${diceRollsMessage}${rollModifierMessage}`;\r\n\r\n            return (\r\n                <div className={`text-color-${roll.damageType.toLowerCase()}`}>\r\n                    {rollStatement} {damageMessage}\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n    \r\n    public constructor(props: IAttackRollModalProps) {\r\n        super(props);\r\n        this.state = {\r\n            attackRoll: 0,\r\n            damageRoll: []\r\n        };\r\n\r\n        this.rollDieAudio.volume = 0.25;\r\n        this.roll1Audio.volume = 0.25;\r\n        this.roll20Audio.volume = 0.25;\r\n    }\r\n\r\n    public render() {\r\n        const handleModalShown: () => void = () => {\r\n            this.rollDieAudio.play();\r\n            this.RollAttack();\r\n            this.RollDamage();\r\n        };\r\n\r\n        // SVG Generated with:\r\n        // https://codepen.io/wvr/pen/WrNgJp\r\n\r\n        return (\r\n            <Modal\r\n                onEntering={handleModalShown}\r\n                show={this.props.show}\r\n                centered={true}\r\n                onHide={this.props.onHide}>\r\n                <Modal.Header>\r\n                    <Modal.Title className=\"pixel-font\">\r\n                        {this.props.attackName}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div className=\"roll-window-image\">\r\n                        <img\r\n                            alt=\"Dice Rolling\"\r\n                            src=\"./images/Item_Shop/RollImage.png\"\r\n                        />\r\n                    </div>\r\n                    <hr className='white-hr' />\r\n                    <h5>Attack</h5>\r\n                    <div className=\"roll-window-attack\">\r\n                        {this.state.attackRoll}\r\n                        <div className=\"roll-window-attack-number\">\r\n                            {this.state.attackRoll}\r\n                        </div>\r\n                        <svg\r\n                            className=\"roll-window-attack-die\"\r\n                            version=\"1.1\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            width=\"64\"\r\n                            height=\"56\" >\r\n                            <path fill=\"#891e2b\" d=\"M0 27.712812921102035L16 0L48 0L64 27.712812921102035L48 55.42562584220407L16 55.42562584220407Z\"></path>\r\n                        </svg>\r\n                    </div>\r\n                    <hr className='white-hr' />\r\n                    <h5>Damage</h5>\r\n                    <div className=\"roll-window-damage\">\r\n                        {this.GetDamageRollDisplay()}\r\n                    </div>\r\n                </Modal.Body>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n","import './Inventory.css';\r\nimport React from 'react';\r\nimport { CharacterState } from '../../Classes/CharacterState';\r\nimport { ItemWeapon } from \"../../Classes/ItemWeapon\";\r\nimport { IItem } from '../../Interfaces/IItem';\r\nimport { ItemCard, TItemClick } from '../Common/ItemCard';\r\nimport { TRemoveClick } from '../../Types/CardButtonCallbackTypes/TRemoveClick';\r\nimport { AttackRollModal } from '../Common/AttackRollModal';\r\nimport { TAttackClick } from '../../Types/CardButtonCallbackTypes/TAttackClick';\r\nimport { TAttack } from '../../Types/TAttack';\r\nimport { ItemWondrous } from '../../Classes/ItemWondrous';\r\nimport { ItemDetailsModal } from '../Common/ItemDetailsModal';\r\n\r\ninterface IInventoryProps {\r\n}\r\n\r\ninterface IInventoryState {\r\n    armorItems: Array<IItem>;\r\n    potionItems: Array<IItem>;\r\n    weaponItems: Array<IItem>;\r\n    wondrousItems: Array<IItem>;\r\n\r\n    showAttackRoll: boolean;\r\n    attackName: string;\r\n    attackRolls: TAttack[];\r\n\r\n    showItemDialog: boolean;\r\n    itemDetails: IItem;\r\n}\r\n\r\nexport class Inventory extends React.Component<IInventoryProps, IInventoryState> {\r\n    private getArmor(itemClick: TItemClick, removeCallback: TRemoveClick) {\r\n        return this.state.armorItems.map((item) => {\r\n            return (\r\n                <ItemCard\r\n                    itemDetails={item}\r\n                    onItemClick={itemClick}\r\n                    onAttackButton={undefined}\r\n                    onPurchaseButton={undefined}\r\n                    onRemoveButton={removeCallback}\r\n                    cardInteractions={[\"Use\", \"Remove\"]}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    private getPotions(itemClick: TItemClick, removeCallback: TRemoveClick) {\r\n        return this.state.potionItems.map((item) => {\r\n            return (\r\n                <ItemCard\r\n                    itemDetails={item}\r\n                    onItemClick={itemClick}\r\n                    onAttackButton={undefined}\r\n                    onPurchaseButton={undefined}\r\n                    onRemoveButton={removeCallback}\r\n                    cardInteractions={[\"Use\", \"Remove\"]}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    private getWeapons(itemClick: TItemClick, removeCallback: TRemoveClick, attackCallback: TAttackClick) {\r\n        return this.state.weaponItems.map((item) => {\r\n            return (\r\n                <ItemCard\r\n                    itemDetails={item}\r\n                    onItemClick={itemClick}\r\n                    onAttackButton={attackCallback}\r\n                    onPurchaseButton={undefined}\r\n                    onRemoveButton={removeCallback}\r\n                    cardInteractions={[\"Use\", \"Remove\"]}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    private getWondrous(itemClick: TItemClick, removeCallback: TRemoveClick) {\r\n        return this.state.wondrousItems.map((item) => {\r\n            return (\r\n                <ItemCard\r\n                    itemDetails={item}\r\n                    onItemClick={itemClick}\r\n                    onAttackButton={undefined}\r\n                    onPurchaseButton={undefined}\r\n                    onRemoveButton={removeCallback}\r\n                    cardInteractions={[\"Use\", \"Remove\"]}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    private handleStorageChange() {\r\n        this.updateFromInventory();\r\n    }\r\n\r\n    private updateFromInventory() {\r\n        this.setState({\r\n            armorItems: CharacterState.GetInstance().GetCurrentItemsOfType(\"Armor\"),\r\n            potionItems: CharacterState.GetInstance().GetCurrentItemsOfType(\"Potion\"),\r\n            weaponItems: CharacterState.GetInstance().GetCurrentItemsOfType(\"Weapon\"),\r\n            wondrousItems: CharacterState.GetInstance().GetCurrentItemsOfType(\"Wondrous\"),\r\n        });\r\n    }\r\n\r\n    public constructor(props: IInventoryProps) {\r\n        super(props);\r\n        this.state = {\r\n            armorItems: [],\r\n            potionItems: [],\r\n            weaponItems: [],\r\n            wondrousItems: [],\r\n            showAttackRoll: false,\r\n            attackName: \"\",\r\n            attackRolls: [],\r\n            showItemDialog: false,\r\n            itemDetails: new ItemWondrous(),\r\n        }\r\n\r\n        const handleChange = this.handleStorageChange;\r\n        CharacterState.GetInstance().onInventoryChanged(handleChange.bind(this))\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateFromInventory();\r\n    }\r\n\r\n    public render() {\r\n        const removeButton = (item: IItem) => {\r\n            CharacterState.GetInstance().RemoveItemFromCurrentCharacter(item);\r\n        }\r\n\r\n        const handleItemClick: TItemClick = (item: IItem) => {\r\n            this.setState({\r\n                itemDetails: item,\r\n                showItemDialog: true\r\n            });\r\n        };\r\n\r\n        const hideDetailsModal = () => {\r\n            this.setState({\r\n                showItemDialog: false,\r\n            });\r\n        };\r\n\r\n        const showAttackModal: TAttackClick = (attackName: string, attackRolls: TAttack[]) => {\r\n            this.setState({\r\n                showAttackRoll: true,\r\n                attackName: attackName,\r\n                attackRolls: attackRolls\r\n            });\r\n        };\r\n\r\n        const hideAttackModal = () => {\r\n            this.setState({\r\n                showAttackRoll: false\r\n            })\r\n        };\r\n\r\n        return (\r\n            <div className=\"inventory-container\">\r\n                <AttackRollModal\r\n                    show={this.state.showAttackRoll}\r\n                    onHide={hideAttackModal}\r\n                    attackName={this.state.attackName}\r\n                    attacks={this.state.attackRolls} />\r\n                <ItemDetailsModal\r\n                    show={this.state.showItemDialog}\r\n                    hideModal={hideDetailsModal}\r\n                    itemDetails={this.state.itemDetails} />\r\n                <div className=\"inventory-title-container\">\r\n                    <h2 className=\"inventory-title-underlined\">\r\n                        {CharacterState.GetInstance().CurrentCharacter}\r\n                    </h2>\r\n                </div>\r\n                <div className=\"inventory-card-container\">\r\n                    <div className=\"inventory-card-container-title\">\r\n                        Armor\r\n                    </div>\r\n                    <div className=\"inventory-cards\">\r\n                        {this.getArmor(handleItemClick, removeButton)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"inventory-card-container\">\r\n                    <div className=\"inventory-card-container-title\">\r\n                        Potions\r\n                    </div>\r\n                    <div className=\"inventory-cards\">\r\n                        {this.getPotions(handleItemClick, removeButton)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"inventory-card-container\">\r\n                    <div className=\"inventory-card-container-title\">\r\n                        Weapons\r\n                    </div>\r\n                    <div className=\"inventory-cards\">\r\n                        {this.getWeapons(handleItemClick, removeButton, showAttackModal)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"inventory-card-container\">\r\n                    <div className=\"inventory-card-container-title\">\r\n                        Wondrous Items\r\n                    </div>\r\n                    <div className=\"inventory-cards\">\r\n                        {this.getWondrous(handleItemClick, removeButton)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { FormEvent, ChangeEvent } from 'react';\r\nimport './LoginPage.css'\r\nimport { UserDataAuth, CreateUserResponse, LoginResponse } from '../Classes/UserDataAuth';\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\ntype LoginPageState = \"CheckingCredentials\" | \"Login\" | \"LoggingIn\" | \"LoggedIn\" | \"LoggingOut\" | \"CreateAnAccount\";\r\n\r\ninterface ILoginPageProps {\r\n};\r\n\r\ninterface ILoginPageState {\r\n    pageState: LoginPageState;\r\n    errorMessages: string[];\r\n}\r\n\r\nexport class LoginPage extends React.Component<ILoginPageProps, ILoginPageState> {\r\n    private currentUsername: string;\r\n    private currentPassword: string;\r\n    private currentPassDupe: string;\r\n\r\n    constructor(props: ILoginPageProps) {\r\n        super(props);\r\n\r\n        this.currentUsername = \"\";\r\n        this.currentPassword = \"\";\r\n        this.currentPassDupe = \"\";\r\n\r\n        var loginState: LoginPageState = \"CheckingCredentials\";\r\n        if (UserDataAuth.GetInstance().CheckForAccess()) {\r\n            loginState = \"LoggedIn\";\r\n        }\r\n\r\n        this.state = {\r\n            pageState: loginState,\r\n            errorMessages: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        UserDataAuth.GetInstance().CheckForAccess().then(granted => {\r\n            if (granted) {\r\n                this.setState({\r\n                    pageState: \"LoggedIn\"\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    pageState: \"Login\"\r\n                })\r\n            }\r\n        }, onRejected => {\r\n            this.setState({\r\n                pageState: \"Login\"\r\n            })\r\n        })\r\n    }\r\n\r\n    private submitLogin(event: FormEvent<HTMLFormElement>) {\r\n        event.preventDefault();\r\n\r\n        // Attempt to log in using UserDataAuth.\r\n        var loginPromise: Promise<LoginResponse> = UserDataAuth.GetInstance().Login(this.currentUsername, this.currentPassword);\r\n        \r\n        loginPromise.then(\r\n            loggedIn => {\r\n                if (loggedIn.DidLogin) {\r\n                    this.setState({\r\n                        pageState: \"LoggedIn\"\r\n                    });\r\n                }\r\n                else {\r\n                    this.setState({\r\n                        errorMessages: [\"That username and password was not valid. Please try again.\"]\r\n                    });\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    private submitLogout() {\r\n        // Logout from the user data auth.\r\n        UserDataAuth.GetInstance().Logout();\r\n\r\n        // Set page state to LoggingOut, which should redirect to the home page.\r\n        this.setState({\r\n            pageState: \"LoggingOut\"\r\n        });\r\n    }\r\n\r\n    private submitCreateAccount(event: FormEvent<HTMLFormElement>) {\r\n        event.preventDefault();\r\n\r\n        var response: Promise<CreateUserResponse> = UserDataAuth.GetInstance().CreateAccount(\r\n            this.currentUsername,\r\n            this.currentPassword,\r\n            this.currentPassDupe);\r\n\r\n        response.then(\r\n            onResolve => {\r\n                // Always set the error list to whatever we got. This way it clears when we have no errors.\r\n                this.setState({\r\n                    errorMessages: onResolve.Errors\r\n                });\r\n\r\n                if (onResolve.DidCreate) {\r\n                    this.setState({\r\n                        pageState: \"LoggedIn\"\r\n                    });\r\n                }\r\n            },  onReject => {\r\n                console.error(\"Failed to create a user account.\");\r\n            }\r\n        )\r\n    }\r\n\r\n    private submitGoToCreateAccount() {\r\n        this.setState({\r\n            pageState: \"CreateAnAccount\"\r\n        });\r\n    }\r\n\r\n    private submitBackToLogin() {\r\n        this.setState({\r\n            pageState : \"Login\"\r\n        });\r\n    }\r\n\r\n    private handleUsernameInput(event: ChangeEvent<HTMLInputElement>) {\r\n        var input = event.target?.value;\r\n        if (input !== null) {\r\n            this.currentUsername = input;\r\n        }\r\n    }\r\n\r\n    private handlePasswordInput(event: ChangeEvent<HTMLInputElement>) {\r\n        var input = event.target?.value;\r\n        if (input !== null) {\r\n            this.currentPassword = input;\r\n        }\r\n    }\r\n    \r\n    private handlePassDupeInput(event: ChangeEvent<HTMLInputElement>) {\r\n        var input = event.target?.value;\r\n        if (input !== null) {\r\n            this.currentPassDupe = input;\r\n        }\r\n    }\r\n\r\n    private getErrorMessages(): JSX.Element[] {\r\n        return (\r\n            this.state.errorMessages.map( e => {\r\n                return(\r\n                    <p>{e}</p>\r\n                )\r\n            })\r\n        )\r\n    }\r\n\r\n    // https://gist.github.com/elitan/5e4cab413dc201e0598ee05287ee4338\r\n    // https://www.carlrippon.com/building-super-simple-react-form-component-typescript-basics/\r\n    render() {\r\n        switch (this.state.pageState) {\r\n            case \"Login\": {\r\n                return (\r\n                    <div className=\"login-container\">\r\n                        <h2 className=\"login-header\">\r\n                            Login\r\n                        </h2>\r\n                        <div className=\"login-error-messages\">\r\n                            {this.getErrorMessages()}\r\n                        </div>\r\n                        <form className=\"login-form\" action=\"/\" method=\"POST\" onSubmit={this.submitLogin.bind(this)}>\r\n                            <br /> <br />\r\n                            <span>Email:</span>\r\n                            <br />\r\n                            <input type=\"text\" name=\"email\" onChange={this.handleUsernameInput.bind(this)} />\r\n                            <br /> <br />\r\n                            <span>Password:</span>\r\n                            <br />\r\n                            <input type=\"password\" name=\"password\" onChange={this.handlePasswordInput.bind(this)} />\r\n                            <br /> <br />\r\n                            <input\r\n                                className=\"login-button\"\r\n                                style={{ display: \"initial\" }}\r\n                                type=\"submit\"\r\n                                value=\"Log In\" />\r\n                        </form>\r\n                        <div className=\"login-button-container\">\r\n                            <button\r\n                                className=\"login-button\"\r\n                                onClick={this.submitGoToCreateAccount.bind(this)}>\r\n                                Create An Account\r\n                            </button>\r\n                            <Link to=\"/\">\r\n                                <button className=\"login-button\">\r\n                                    Back to Main Page\r\n                            </button>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n            case \"LoggingIn\": {\r\n                return (\r\n                    <Redirect to=\"/\" />\r\n                )\r\n            }\r\n            case \"LoggedIn\": {\r\n                return (\r\n                    <div className=\"login-container\">\r\n                        <h2 className=\"login-header\">\r\n                            Logged In\r\n                        </h2>\r\n                        <h3>You are logged in as {UserDataAuth.GetInstance().Username}</h3>\r\n                        <br /><br />\r\n                        <div className=\"login-button-container\">\r\n                            <button className=\"login-button\" onClick={this.submitLogout.bind(this)}>\r\n                                Log Out\r\n                            </button>\r\n                            <Link to=\"/\">\r\n                                <button className=\"login-button\">\r\n                                    Back to Main Page\r\n                                </button>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            case \"LoggingOut\": {\r\n                return (\r\n                    <Redirect to=\"/\" />\r\n                );\r\n            }\r\n            case \"CreateAnAccount\": {\r\n                return (\r\n                    <div className=\"login-container\">\r\n                        <h2 className=\"login-header\">\r\n                            Create An Account\r\n                        </h2>\r\n                        <div className=\"login-error-messages\">\r\n                            {this.getErrorMessages()}\r\n                        </div>\r\n                        <form className=\"login-form\" action=\"/\" method=\"POST\" onSubmit={this.submitCreateAccount.bind(this)}>\r\n                            <br /> <br />\r\n                            <span>Email:</span>\r\n                            <br />\r\n                            <input type=\"text\" name=\"email\" onChange={this.handleUsernameInput.bind(this)} />\r\n                            <br /> <br />\r\n                            <span>Password:</span>\r\n                            <br />\r\n                            <input type=\"password\" name=\"password\" onChange={this.handlePasswordInput.bind(this)} />\r\n                            <br /> <br />\r\n                            <span>Password Duplicate:</span>\r\n                            <br />\r\n                            <input type=\"password\" name=\"passwordDupe\" onChange={this.handlePassDupeInput.bind(this)} />\r\n                            <br /> <br />\r\n                            <input\r\n                                className=\"login-button\"\r\n                                type=\"submit\"\r\n                                style={{ display: \"initial\" }}\r\n                                value=\"Create Account\" />\r\n                        </form>\r\n                        <div className=\"login-button-container\">\r\n                            <button\r\n                                className=\"login-button\"\r\n                                onClick={this.submitBackToLogin.bind(this)}>\r\n                                Back To Login\r\n                        </button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            case \"CheckingCredentials\": {\r\n                return (\r\n                    <div>\r\n                        <h2>Checking login credentials . . . </h2>\r\n                    </div>\r\n                )\r\n            }\r\n            default: {\r\n                return (\r\n                    <div className=\"login-container\">\r\n                        <h2 className=\"login-header\">\r\n                            Login Page\r\n                        </h2>\r\n                        <div className=\"login-button-container\">\r\n                            <Link to=\"/\">\r\n                                <button className=\"login-button\">\r\n                                    Back to Main Page\r\n                            </button>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { UserDataAuth } from '../Classes/UserDataAuth';\r\n\r\nexport interface IProtectedRouteState {\r\n    routeStatus: TRouteCheckStatus;\r\n}\r\n\r\nexport interface IProtectedRouteProps {\r\n    children: JSX.Element,\r\n    path: string\r\n}\r\n\r\ntype TRouteCheckStatus = \"Granted\" | \"Redirect\" | \"Checking\"\r\n\r\n// https://reacttraining.com/react-router/web/example/auth-workflow\r\n// https://tylermcginnis.com/react-router-protected-routes-authentication/\r\nexport class ProtectedRoute extends React.Component<IProtectedRouteProps, IProtectedRouteState> {\r\n    public constructor(props: IProtectedRouteProps) {\r\n        super(props);\r\n        this.state = {\r\n            routeStatus: \"Checking\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.GetComponentToRender();\r\n    }\r\n\r\n    private GetComponentToRender(): void {\r\n        // this.CheckForAccess().then(granted => {\r\n        UserDataAuth.GetInstance().CheckForAccess().then(granted => {\r\n            if (granted) {\r\n                this.setState({\r\n                    routeStatus: \"Granted\"\r\n                });\r\n            }\r\n            else {\r\n                this.setState({\r\n                    routeStatus: \"Redirect\"\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    public render() {\r\n        switch(this.state.routeStatus) {\r\n            case \"Granted\": {\r\n                return (\r\n                    <Route path={this.props.path} children={this.props.children} />\r\n                );\r\n            }\r\n            case \"Redirect\": {\r\n                return (\r\n                    <Redirect to='/login' />\r\n                );\r\n            }\r\n            case \"Checking\":\r\n            default: {\r\n                return (\r\n                    <div>\r\n                        <h2>Checking user authorization . . .</h2>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n}\r\n","import './css/LandingSpace.css';\r\n\r\nimport React from 'react';\r\nimport {\r\n    HashRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link\r\n} from \"react-router-dom\";\r\nimport {CharacterCreator} from './CharacterCreator/React/CharacterCreator';\r\nimport {ItemShop} from './Items/React/Shop/ItemShop';\r\nimport {Inventory} from './Items/React/Inventory/Inventory';\r\nimport {LoginPage} from './Login/React/LoginPage';\r\nimport { ProtectedRoute } from './Login/React/ProtectedRoute';\r\n\r\ninterface ILandingSpaceProps {\r\n};\r\n\r\ninterface ILandingSpaceState {\r\n};\r\n\r\n// Use the hash router instead of a browser router so that refreshes and direct-links to pages work.\r\n//https://stackoverflow.com/questions/27928372/react-router-urls-dont-work-when-refreshing-or-writing-manually\r\nexport default function LandingSpace() {\r\n    return (\r\n        <div className=\"page-nav\">\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path=\"/\" children={<Home />} />\r\n                    <Route exact path=\"/login\" children={<LoginPage />} />\r\n                    <Route path=\"/creatorPage\" children={<CharacterCreator />} />\r\n                    <ProtectedRoute path=\"/itemShop\" children={<ItemShop />} />\r\n                    <ProtectedRoute path=\"/inventory\" children={<Inventory />} />\r\n                </Switch>\r\n            </Router>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Home() {\r\n    return (\r\n        <div className=\"nav-bar\">\r\n            <h1>Here Be Links</h1>\r\n            <h2 className=\"nav-entry\">\r\n                <Link to=\"/login\">\r\n                    &gt;&gt;&gt; Login Page &lt;&lt;&lt;\r\n                </Link>\r\n            </h2>\r\n            <h2 className=\"nav-entry\">\r\n                <Link to=\"/creatorPage\">\r\n                    &gt;&gt;&gt; DnD Character Creator &lt;&lt;&lt;\r\n                </Link>\r\n            </h2>\r\n            <h2 className=\"nav-entry\">\r\n                <Link to=\"/itemShop\">\r\n                    &gt;&gt;&gt; DnD Item Shop &lt;&lt;&lt;\r\n                </Link>\r\n            </h2>\r\n            <h2 className=\"nav-entry\">\r\n                <Link to=\"/inventory\">\r\n                    &gt;&gt;&gt; DnD Item Inventory &lt;&lt;&lt;\r\n                </Link>\r\n            </h2>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport LandingSpace from './LandingSpace';\r\n\r\nReactDOM.render(<LandingSpace />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}