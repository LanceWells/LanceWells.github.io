{"version":3,"sources":["BodyMap.tsx","BodySelector.tsx","PartSelector.tsx","PartAccordion.tsx","Canvas.tsx","CharacterCreator.tsx","serviceWorker.ts","index.tsx"],"names":["bodyMaps","Array","push","name","description","imageSource","layers","key","layerIndex","images","BodySelector","props","Card","bg","style","width","borderColor","boxShadow","Button","className","variant","onClick","bodyMap","Img","src","Body","Title","Text","PartSelector","roundedCircle","PartAccordion","layer","map","this","background","text","Accordion","Toggle","as","Header","eventKey","toString","cursor","Collapse","renderPartsButtons","renderPartCards","React","Component","Canvas","canvasHeight","canvasWidth","refs","canvas","getContext","imageSmoothingEnabled","prevProps","imagesToRender","setState","ctx","clearRect","forEach","imgSrc","htmlImg","Image","onload","drawImage","height","id","ref","onClickDownload","document","getElementById","CharacterCreator","state","canvasImages","partLayers","downloadUrl","toDataURL","link","createElement","download","href","click","newCanvasImages","slice","newImagesToRender","body","handleBodySelection","canvasImagesToRender","currentBodyMap","Container","Row","Col","lg","downloadImage","layerName","handlePartSelection","CardColumns","renderBodySelection","Boolean","window","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b66e9067.chunk.js","sourcesContent":["/**\r\n * @description\r\n * The contents of each image \"layer\" that can be overlayed on top of the character image. This contains info\r\n * about what the layer is called (e.g. 'clothing', or 'hats'), what the z-layer info is for the layer, and a\r\n * list of possible image sources that are contained in the image layer.\r\n * @param key The name of the layer.\r\n * @param layerIndex The z-index of the layer. The higher the number, the more 'in front' that the layer is.\r\n * @param images A list of possible image sources that are drawn in this layer. Only one of these can be drawn\r\n * from this list at a time (this is intentional).\r\n */\r\nexport type ImageLayer = {\r\n    key: string;\r\n    layerIndex: number;\r\n    images: string[];\r\n}\r\n\r\n/**\r\n * @description\r\n * A mapping from the body that will be displayed to the list of layers associated with that body.\r\n */\r\nexport type BodyMap = {\r\n    name: string;\r\n    description: string;\r\n    imageSource: string;\r\n    layers: ImageLayer[];\r\n}\r\n\r\n/**\r\n * @remarks The layer index for every layer starts at 1. This is because '0' is reserved for the base\r\n * body. Setting this to '0' on a layer will remove the base body.\r\n * @todo Make this import from a json file instead.\r\n */\r\nexport const bodyMaps: BodyMap[] = new Array(0);\r\nbodyMaps.push({\r\n    name: 'Average-Sized Male',\r\n    description: \"Men of average height! Useful for human characters and elves.\",\r\n    imageSource: \"./images/Size_Average/Base_Male_Light.png\",\r\n    layers: [{\r\n        key: \"Body Archetype\",\r\n        layerIndex: 1,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/Base_Male_Drow.png\",\r\n            \"./images/Size_Average/Base_Male_Pale.png\",\r\n            \"./images/Size_Average/Base_Male_Fair.png\",\r\n            \"./images/Size_Average/Base_Male_Light.png\",\r\n            \"./images/Size_Average/Base_Male_Tan.png\",\r\n            \"./images/Size_Average/Base_Male_Dark.png\",\r\n            \"./images/Size_Average/Base_Male_Darker.png\",\r\n            \"./images/Size_Average/Base_Male_Darkest.png\",\r\n        ],\r\n    },\r\n    {\r\n        key: \"Sparkles\",\r\n        layerIndex: 2,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Sparkles/YellowSparkles.png\",\r\n        ]\r\n    }]\r\n}, {\r\n    name: 'Average-Sized Female',\r\n    description: \"Women of average height! Useful for human characters and elves.\",\r\n    imageSource: \"./images/Size_Average/Base_Female_Light.png\",\r\n    layers: [{\r\n        key: \"Body Archetype\",\r\n        layerIndex: 1,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/Base_Female_Drow.png\",\r\n            \"./images/Size_Average/Base_Female_Pale.png\",\r\n            \"./images/Size_Average/Base_Female_Fair.png\",\r\n            \"./images/Size_Average/Base_Female_Light.png\",\r\n            \"./images/Size_Average/Base_Female_Tan.png\",\r\n            \"./images/Size_Average/Base_Female_Dark.png\",\r\n            \"./images/Size_Average/Base_Female_Darker.png\",\r\n            \"./images/Size_Average/Base_Female_Darkest.png\",\r\n        ],\r\n    }, {\r\n        key: \"Cloaks\",\r\n        layerIndex: 2,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/Cloaks/DarkCloak.png\",\r\n        ]\r\n    }, {\r\n        key: \"Leggings\",\r\n        layerIndex: 3,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/Leggings/BlackSimple.png\",\r\n        ]\r\n    }, {\r\n        key: \"Lower Armor\",\r\n        layerIndex: 4,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/LowerArmor/KneePlates.png\",\r\n        ]\r\n    }, {\r\n        key: \"Shoes\",\r\n        layerIndex: 5,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/Shoes/BattleBoots.png\",\r\n            \"./images/Size_Average/FemaleClothing/Shoes/Boots.png\",\r\n            \"./images/Size_Average/FemaleClothing/Shoes/PlainShoes.png\",\r\n        ]\r\n    }, {\r\n        key: \"Shirts\",\r\n        layerIndex: 6,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/Shirts/WhiteSimple.png\",\r\n            \"./images/Size_Average/FemaleClothing/Shirts/SimpleDark.png\",\r\n        ]\r\n    }, {\r\n        key: \"Upper Armor\",\r\n        layerIndex: 7,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/UpperArmor/LeatherCorset.png\",\r\n            \"./images/Size_Average/FemaleClothing/UpperArmor/PurpleScaleMail.png\",\r\n        ]\r\n    }, {\r\n        key: \"Mid Accessory\",\r\n        layerIndex: 8,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/MidAccessory/LargeBelt.png\",\r\n            \"./images/Size_Average/FemaleClothing/MidAccessory/LargeBeltWithKnives.png\",\r\n        ]\r\n    }, {\r\n        key: \"Arm Armor\",\r\n        layerIndex: 9,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/ArmArmor/GreenScales.png\",\r\n            \"./images/Size_Average/FemaleClothing/ArmArmor/RedScales.png\",\r\n            \"./images/Size_Average/FemaleClothing/ArmArmor/PlatedSleeves.png\",\r\n        ]\r\n    }, {\r\n        key: \"Hair\",\r\n        layerIndex: 10,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n            \"./images/Size_Average/FemaleClothing/Hair/RedLong.png\",\r\n            \"./images/Size_Average/FemaleClothing/Hair/BlackLong.png\",\r\n            \"./images/Size_Average/FemaleClothing/Hair/DarkHood.png\",\r\n        ]\r\n    }, {\r\n        key: \"Hats\",\r\n        layerIndex: 11,\r\n        images: [\r\n            \"./images/Empty/Empty.png\",\r\n        ]\r\n    }\r\n    ]\r\n}\r\n\r\n);","import React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { BodyMap } from './BodyMap';\r\nimport Card from 'react-bootstrap/Card';\r\n\r\ninterface IBodySelector {\r\n    onClick: Function;\r\n    bodyMap: BodyMap;\r\n}\r\n\r\nexport function BodySelector(props: IBodySelector) {\r\n    return (\r\n        <Card\r\n            bg='dark'\r\n            style={{\r\n                width: '18rem',\r\n                borderColor: 'rgba(255, 255, 255, 0.05)',\r\n                boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)'\r\n            }}>\r\n            <Button\r\n                className='bodySelector'\r\n                variant='dark'\r\n                style={{\r\n                    borderColor: 'rgba(255, 255, 255, 0.05)',\r\n                    boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)'\r\n                }}\r\n                onClick={() => props.onClick(props.bodyMap)}>\r\n                <Card.Img src={props.bodyMap.imageSource} />\r\n                <Card.Body\r\n                    className='body-selector-card'>\r\n                    <Card.Title>{props.bodyMap.name}</Card.Title>\r\n                    <Card.Text>{props.bodyMap.description}</Card.Text>\r\n                </Card.Body>\r\n            </Button>\r\n        </Card>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Image from 'react-bootstrap/Image';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\ninterface IPartSelector {\r\n    onClick: Function;\r\n    layerIndex: number;\r\n    imageSource: string;\r\n}\r\n\r\nexport default function PartSelector(props: IPartSelector) {\r\n    return (\r\n        <Button\r\n            className='part-selector-button'\r\n            variant='dark'\r\n            style={{\r\n                borderColor: 'rgba(255, 255, 255, 0.05)',\r\n                boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)'\r\n            }}\r\n            onClick={() => props.onClick(props.layerIndex, props.imageSource)}>\r\n            <Image\r\n                className='partSelector'\r\n                src={props.imageSource}\r\n                roundedCircle />\r\n        </Button>\r\n    )\r\n}","import React from 'react';\r\nimport { ImageLayer } from './BodyMap';\r\nimport PartSelector from './PartSelector';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\n\r\ninterface IPartAccordion {\r\n    layers: ImageLayer[];\r\n    onClick: Function;\r\n}\r\n\r\nexport class PartAccordion extends React.Component<IPartAccordion> {\r\n    renderPartsButtons(layer: ImageLayer) {\r\n        return layer.images.map((src) => {\r\n            return (\r\n                <PartSelector\r\n                    onClick={this.props.onClick}\r\n                    layerIndex={layer.layerIndex}\r\n                    imageSource={src}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    renderPartCards() {\r\n        return this.props.layers.map((layer) => {\r\n            return (\r\n                <Card style={{ background: 'rgba(255, 255, 255, 0.07)' }} text=\"white\">\r\n                    <Accordion.Toggle as={Card.Header} eventKey={layer.layerIndex.toString()}\r\n                        style={{ cursor: \"pointer\" }}>\r\n                        {layer.key}\r\n                    </Accordion.Toggle>\r\n                    <Accordion.Collapse eventKey={layer.layerIndex.toString()}>\r\n                        <Card.Body>\r\n                            {this.renderPartsButtons(layer)}\r\n                        </Card.Body>\r\n                    </Accordion.Collapse>\r\n                </Card>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.renderPartCards()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// https://blog.cloudboost.io/using-html5-canvas-with-react-ff7d93f5dc76\r\nimport React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\ninterface ICanvasProps {\r\n    imagesToRender: Array<string>;\r\n    onClickDownload: Function;\r\n}\r\n\r\nexport class Canvas extends React.Component<ICanvasProps> {\r\n    canvasHeight: number = 256;\r\n    canvasWidth: number = 256;\r\n\r\n    componentDidMount() {\r\n        const canvas = this.refs.canvas as HTMLCanvasElement;\r\n        const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n        ctx.imageSmoothingEnabled = false;\r\n    }\r\n\r\n    componentDidUpdate(prevProps: ICanvasProps)\r\n    {\r\n        if (this.props.imagesToRender !== prevProps.imagesToRender)\r\n        {\r\n            this.setState(this.props);\r\n\r\n            const canvas = this.refs.canvas as HTMLCanvasElement;\r\n            const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n\r\n            // Always empty the canvas before we decide to muss with it again.\r\n            ctx.clearRect(0, 0, this.canvasHeight, this.canvasWidth);\r\n            \r\n            // Muss with it again! This draws each of the images in our props field one-after-another.\r\n            this.props.imagesToRender.forEach((imgSrc: string) => {\r\n                var htmlImg = new Image(this.canvasWidth, this.canvasHeight);\r\n                htmlImg.src = imgSrc;\r\n                \r\n                htmlImg.onload = () => {\r\n                    ctx.drawImage(htmlImg, 0, 0, htmlImg.width, htmlImg.height);\r\n                };\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <canvas id=\"characterCanvas\" ref=\"canvas\" width={this.canvasWidth} height={this.canvasHeight} />\r\n                <Button\r\n                    variant=\"primary\"\r\n                    className=\"downloadButton\"\r\n                    onClick={() => this.props.onClickDownload(document.getElementById('characterCanvas'))}>\r\n                    <h4>&gt;&gt; DOWNLOAD &lt;&lt;</h4>\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}","import './CharacterCreator.css';\r\nimport { bodyMaps, BodyMap, ImageLayer } from './BodyMap';\r\n\r\nimport React from 'react';\r\n\r\nimport {BodySelector} from './BodySelector';\r\nimport {PartAccordion} from './PartAccordion';\r\nimport {Canvas} from './Canvas';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport CardColumns from 'react-bootstrap/CardColumns'\r\n\r\n/**\r\n * @description\r\n * The interface for props passed to this object. This class in particular takes no props; it is effectively\r\n * the app itself.\r\n */\r\ninterface ICharacterCreatorProps {\r\n};\r\n\r\n/**\r\n * @description\r\n * The interface for the internal state maintained by this object.\r\n * @param canvasImages The list of image sources, represented as strings, that will be rendered using the\r\n * Canvas class.\r\n * @param partLayers A list of image layers. This contains information about all of the possible layers that\r\n * can be drawn to the currently-selected body type. This contains information about what each layer is, how\r\n * that layer is drawn, and what the possible images are in that layer.\r\n */\r\ninterface ICharacterCreatorState {\r\n    canvasImages: Array<string>,\r\n    partLayers: ImageLayer[]\r\n};\r\n\r\n/**\r\n * The main entry point for this application. Provides all of the buttons and fun stuff needed to create a\r\n * character image on a canvas element.\r\n */\r\nclass CharacterCreator extends React.Component<ICharacterCreatorProps, ICharacterCreatorState> {\r\n    constructor(props: ICharacterCreatorProps) {\r\n        super(props);\r\n        this.state = {\r\n            // Just fill the canvas images with nothing. We'll re-define it when we add to it.\r\n            canvasImages: new Array<string>(),\r\n            partLayers: Array(0)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Used to download the main character image from the canvas. This is a callback that is passed down to\r\n     * the canvas element.\r\n     * @param canvas The canvas html element from the Canvas character creator class.\r\n     */\r\n    downloadImage(canvas: HTMLCanvasElement)\r\n    {\r\n        const downloadUrl = canvas.toDataURL('image/png');\r\n        const link = document.createElement('a');\r\n\r\n        link.download = 'characterImage.png';\r\n        link.href = downloadUrl;\r\n        link.click();\r\n    }\r\n\r\n    /**\r\n     * A handler for a part selector. Replaces the image at the specified index with a new image.\r\n     * @param layerIndex The index of the layer. This is the z-layer, effectively. The higher the number, the\r\n     * more layers that it draws over.\r\n     * @param imageSource The image source. This is what gets drawn.\r\n     */\r\n    handlePartSelection(layerIndex: number, imageSource: string) {\r\n        const newCanvasImages: Array<string> = this.state.canvasImages.slice();\r\n\r\n        // Javascript doesn't have arrays of fixed length, so this is safe? Still getting used to this.\r\n        newCanvasImages[layerIndex] = imageSource;\r\n\r\n        this.setState({\r\n            canvasImages: newCanvasImages\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Handles the prop-pass from the body-type selector.\r\n     * @param bodyType The type of body that this character creator should acknowledge.\r\n     */\r\n    handleBodySelection(bodyMap: BodyMap) {\r\n        const newImagesToRender: Array<string> = new Array<string>(0);\r\n\r\n        // Javascript doesn't have arrays of fixed length, so this is safe? Still getting used to this.\r\n        newImagesToRender[0] = bodyMap.imageSource;\r\n\r\n        this.setState({\r\n            canvasImages: newImagesToRender,\r\n            partLayers: bodyMap.layers\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Renders a series of body selectors for the user to pick from. These body selectors will modify the list\r\n     * of available accessories (since a tiny hat looks silly on a giant person . . . or does it?). Needs to\r\n     * look at the BodyMap.tsx file to understand what will be populated.\r\n     */\r\n    renderBodySelection() {\r\n        return bodyMaps.map((bodyMap) => {\r\n            return (\r\n                <BodySelector\r\n                    onClick={(body: BodyMap) => this.handleBodySelection(body)}\r\n                    bodyMap={bodyMap}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders this object.\r\n     */\r\n    render() {\r\n        const canvasImagesToRender = this.state.canvasImages;\r\n        const currentBodyMap = this.state.partLayers;\r\n\r\n        return (\r\n            <div className=\"CharacterCreator\">\r\n                <h1>Character Creator</h1>\r\n                <Container>\r\n                    <Row className=\"align-items-center\">\r\n                        <Col lg={true} className='TopSplit'>\r\n                            <Canvas\r\n                                imagesToRender={canvasImagesToRender}\r\n                                onClickDownload={(canvas: HTMLCanvasElement) => this.downloadImage(canvas)}\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col lg={true} className='BottomSplit'>\r\n                            <h2>Accessory Selection</h2>\r\n                            <p className=\"italics\">(You need to select a body first if this is empty)</p>\r\n                            <Accordion>\r\n                                <PartAccordion\r\n                                    layers={currentBodyMap}\r\n                                    onClick={(layerName: number, imageSource: string) => this.handlePartSelection(layerName, imageSource)}\r\n                                />\r\n                            </Accordion>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col lg={true} className='BottomSplit'>\r\n                            <h2>Body Selection</h2>\r\n                            <p className=\"italics\">(Each body type uses different accessories and will reset your character design)</p>\r\n                            <CardColumns>\r\n                                {this.renderBodySelection()}\r\n                            </CardColumns>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CharacterCreator;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CharacterCreator from './CharacterCreator'\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<CharacterCreator />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}